<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>P2532R0: Removing exception_ptr from the Receiver Concepts</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
<style type="text/css">
    table, th, td {
      border: 1px solid black;
      border-collapse: collapse;
      vertical-align: top;
    }
    th, td {
      border-left: none;
      border-right: none;
      padding: 0px 10px;
    }
    th {
      text-align: center;
    }

    del { background: #fcc; color: #000; text-decoration: line-through; }
    ins { background: #cfc; color: #000; }
    blockquote .highlight:not(.idl) { background: initial; margin: initial; padding: 0.5em }
    blockquote ul { background: inherit; }
    blockquote code.highlight:not(.idl) { padding: initial; }
    blockquote c-[a] { color: inherit; } /* Keyword.Declaration */
    blockquote c-[b] { color: inherit; } /* Keyword.Type */
    blockquote c-[c] { color: inherit; } /* Comment */
    blockquote c-[d] { color: inherit; } /* Comment.Multiline */
    blockquote c-[e] { color: inherit; } /* Name.Attribute */
    blockquote c-[f] { color: inherit; } /* Name.Tag */
    blockquote c-[g] { color: inherit; } /* Name.Variable */
    blockquote c-[k] { color: inherit; } /* Keyword */
    blockquote c-[l] { color: inherit; } /* Literal */
    blockquote c-[m] { color: inherit; } /* Literal.Number */
    blockquote c-[n] { color: inherit; } /* Name */
    blockquote c-[o] { color: inherit; } /* Operator */
    blockquote c-[p] { color: inherit; } /* Punctuation */
    blockquote c-[s] { color: inherit; } /* Literal.String */
    blockquote c-[t] { color: inherit; } /* Literal.String.Single */
    blockquote c-[u] { color: inherit; } /* Literal.String.Double */
    blockquote c-[cp] { color: inherit; } /* Comment.Preproc */
    blockquote c-[c1] { color: inherit; } /* Comment.Single */
    blockquote c-[cs] { color: inherit; } /* Comment.Special */
    blockquote c-[kc] { color: inherit; } /* Keyword.Constant */
    blockquote c-[kn] { color: inherit; } /* Keyword.Namespace */
    blockquote c-[kp] { color: inherit; } /* Keyword.Pseudo */
    blockquote c-[kr] { color: inherit; } /* Keyword.Reserved */
    blockquote c-[ld] { color: inherit; } /* Literal.Date */
    blockquote c-[nc] { color: inherit; } /* Name.Class */
    blockquote c-[no] { color: inherit; } /* Name.Constant */
    blockquote c-[nd] { color: inherit; } /* Name.Decorator */
    blockquote c-[ni] { color: inherit; } /* Name.Entity */
    blockquote c-[ne] { color: inherit; } /* Name.Exception */
    blockquote c-[nf] { color: inherit; } /* Name.Function */
    blockquote c-[nl] { color: inherit; } /* Name.Label */
    blockquote c-[nn] { color: inherit; } /* Name.Namespace */
    blockquote c-[py] { color: inherit; } /* Name.Property */
    blockquote c-[ow] { color: inherit; } /* Operator.Word */
    blockquote c-[mb] { color: inherit; } /* Literal.Number.Bin */
    blockquote c-[mf] { color: inherit; } /* Literal.Number.Float */
    blockquote c-[mh] { color: inherit; } /* Literal.Number.Hex */
    blockquote c-[mi] { color: inherit; } /* Literal.Number.Integer */
    blockquote c-[mo] { color: inherit; } /* Literal.Number.Oct */
    blockquote c-[sb] { color: inherit; } /* Literal.String.Backtick */
    blockquote c-[sc] { color: inherit; } /* Literal.String.Char */
    blockquote c-[sd] { color: inherit; } /* Literal.String.Doc */
    blockquote c-[se] { color: inherit; } /* Literal.String.Escape */
    blockquote c-[sh] { color: inherit; } /* Literal.String.Heredoc */
    blockquote c-[si] { color: inherit; } /* Literal.String.Interpol */
    blockquote c-[sx] { color: inherit; } /* Literal.String.Other */
    blockquote c-[sr] { color: inherit; } /* Literal.String.Regex */
    blockquote c-[ss] { color: inherit; } /* Literal.String.Symbol */
    blockquote c-[vc] { color: inherit; } /* Name.Variable.Class */
    blockquote c-[vg] { color: inherit; } /* Name.Variable.Global */
    blockquote c-[vi] { color: inherit; } /* Name.Variable.Instance */
    blockquote c-[il] { color: inherit; } /* Literal.Number.Integer.Long */
  </style>
  <meta content="Bikeshed version 2e3c4c68b, updated Fri Jan 14 14:49:00 2022 -0800" name="generator">
  <link href="https://wg21.link/P2532" rel="canonical">
  <link href="https://isocpp.org/favicon.ico" rel="icon">
<style>
pre {
  margin-top: 0px;
  margin-bottom: 0px;
}
table, th, tr, td {
  border: 2px solid black !important;
}
@media (prefers-color-scheme: dark) {
  table, th, tr, td {
    border: 2px solid white !important;
  }
}
.ins, ins, ins *, span.ins, span.ins * {
  background-color: rgb(200, 250, 200);
  color: rgb(0, 136, 0);
  text-decoration: none;
}
.del, del, del *, span.del, span.del * {
  background-color: rgb(250, 200, 200);
  color: rgb(255, 0, 0);
  text-decoration: line-through;
  text-decoration-color: rgb(255, 0, 0);
}
math, span.math {
  font-family: serif;
  font-style: italic;
}
ul {
  list-style-type: "— ";
}
blockquote {
  counter-reset: paragraph;
}
div.numbered, div.newnumbered {
  margin-left: 2em;
  margin-top: 1em;
  margin-bottom: 1em;
}
div.numbered:before, div.newnumbered:before {
  position: absolute;
  margin-left: -2em;
  display-style: block;
}
div.numbered:before {
  content: counter(paragraph);
  counter-increment: paragraph;
}
div.newnumbered:before {
  content: "�";
}
div.numbered ul, div.newnumbered ul {
  counter-reset: list_item;
}
div.numbered li, div.newnumbered li {
  margin-left: 3em;
}
div.numbered li:before, div.newnumbered li:before {
  position: absolute;
  margin-left: -4.8em;
  display-style: block;
}
div.numbered li:before {
  content: "(" counter(paragraph) "." counter(list_item) ")";
  counter-increment: list_item;
}
div.newnumbered li:before {
  content: "(�." counter(list_item) ")";
  counter-increment: list_item;
}
</style>
<style>/* style-autolinks */

.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}</style>
<style>/* style-counters */

body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}</style>
<style>/* style-issues */

a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */

/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-syntax-highlighting */

code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1 class="p-name no-ref" id="title">P2532R0<br><code class="highlight"><c- n>Removing</c-> <c- n>exception_ptr</c-> <c- n>from</c-> <c- n>the</c-> <c- n>Receiver</c-> <c- n>Concepts</c-></code></h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Published Proposal, <time class="dt-updated" datetime="2022-02-06">2022-02-06</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt class="editor">Author:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:eric.niebler@gmail.com">Eric Niebler</a>
     <dt>Source:
     <dd><a href="https://github.com/brycelelbach/wg21_p2300_std_execution/blob/main/receiver_redesign.bs">GitHub</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/brycelelbach/wg21_p2300_std_execution/issues">GitHub</a>
     <dt>Project:
     <dd>ISO/IEC JTC1/SC22/WG21 14882: Programming Language — C++
     <dt>Audience:
     <dd>LEWG
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#motivation"><span class="secno">1.1</span> <span class="content">Motivation</span></a>
      <li><a href="#design-summary"><span class="secno">1.2</span> <span class="content">Design Summary</span></a>
      <li><a href="#design-rationale"><span class="secno">1.3</span> <span class="content">Design Rationale</span></a>
     </ol>
    <li>
     <a href="#design-details"><span class="secno">2</span> <span class="content">Design Details</span></a>
     <ol class="toc">
      <li><a href="#no-get-env-default"><span class="secno">2.1</span> <span class="content">Remove the default implementation of the <code class="highlight"><c- n>get_env</c-></code> receiver query.</span></a>
      <li><a href="#receiver-of-completion-signatures"><span class="secno">2.2</span> <span class="content">The <code class="highlight"><c- n>receiver_of</c-></code> concept takes a receiver and an instance of the <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> class template.</span></a>
      <li><a href="#noexcept-set-value"><span class="secno">2.3</span> <span class="content">A receiver’s customization of <code class="highlight"><c- n>set_value</c-></code> is required to be <code class="highlight"><c- k>noexcept</c-></code>.</span></a>
      <li><a href="#sender-to-requirements"><span class="secno">2.4</span> <span class="content">The <code class="highlight"><c- n>sender_to</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Rcvr</c-><c- o>></c-></code> concept requires <code class="highlight"><c- n>Rcvr</c-></code> to accept all of <code class="highlight"><c- n>Sndr</c-></code>'s completions.</span></a>
      <li><a href="#connect-requirements"><span class="secno">2.5</span> <span class="content"><code class="highlight"><c- n>connect</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>rcvr</c-><c- p>)</c-></code> also requires <code class="highlight"><c- n>rcvr</c-></code> to accept all of <code class="highlight"><c- n>sndr</c-></code>'s completions.</span></a>
      <li><a href="#get-completion-signatures"><span class="secno">2.6</span> <span class="content"><code class="highlight"><c- n>get_completion_signatures</c-></code> is required to return an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class template.</span></a>
      <li><a href="#sender-traits-aliases"><span class="secno">2.7</span> <span class="content">The <code class="highlight"><c- n>value_types_of_t</c-></code> and <code class="highlight"><c- n>error_types_of_t</c-></code> template aliases remain.</span></a>
      <li><a href="#make-completion-signatures"><span class="secno">2.8</span> <span class="content">The <code class="highlight"><c- n>make_completion_signatures</c-></code> design is slightly tweaked to be more general.</span></a>
     </ol>
    <li>
     <a href="#considerations"><span class="secno">3</span> <span class="content">Considerations</span></a>
     <ol class="toc">
      <li><a href="#nothrow-set-value"><span class="secno">3.1</span> <span class="content">Implications of <code class="highlight"><c- k>noexcept</c-></code> <code class="highlight"><c- n>set_value</c-></code></span></a>
      <li><a href="#diagnostics"><span class="secno">3.2</span> <span class="content">Diagnostics</span></a>
     </ol>
    <li>
     <a href="#open-questions"><span class="secno">4</span> <span class="content">Open questions</span></a>
     <ol class="toc">
      <li><a href="#fno-exceptions"><span class="secno">4.1</span> <span class="content">Weasel wording for <code class="highlight"><c- o>-</c-><c- n>fno</c-><c- o>-</c-><c- n>exceptions</c-></code></span></a>
      <li><a href="#allocations"><span class="secno">4.2</span> <span class="content">Error channel of allocating algorithms</span></a>
     </ol>
    <li><a href="#implementation-experience"><span class="secno">5</span> <span class="content">Implementation experience</span></a>
    <li>
     <a href="#proposed-wording"><span class="secno">6</span> <span class="content">Proposed wording</span></a>
     <ol class="toc">
      <li><a href="#header-execution-synopsis"><span class="secno">6.1</span> <span class="content">Header <code class="highlight"><c- o>&lt;</c-><c- n>execution</c-><c- o>></c-></code> synopsis</span></a>
      <li><a href="#executionget_env"><span class="secno">6.2</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>get_env</c-></code></span></a>
      <li><a href="#receivers"><span class="secno">6.3</span> <span class="content">Receivers</span></a>
      <li><a href="#executionset_value"><span class="secno">6.4</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code></span></a>
      <li><a href="#senders"><span class="secno">6.5</span> <span class="content">Senders</span></a>
      <li><a href="#executioncompletion_signatures_of_t"><span class="secno">6.6</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures_of_t</c-></code></span></a>
      <li><a href="#dependent_completion_signatures"><span class="secno">6.7</span> <span class="content"><code class="highlight"><c- n>dependent_completion_signatures</c-></code></span></a>
      <li><a href="#executionconnect"><span class="secno">6.8</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-></code></span></a>
      <li><a href="#executionjust"><span class="secno">6.9</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just</c-></code></span></a>
      <li><a href="#executionjust_error"><span class="secno">6.10</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_error</c-></code></span></a>
      <li><a href="#executionjust_stopped"><span class="secno">6.11</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_stopped</c-></code></span></a>
      <li><a href="#executionread"><span class="secno">6.12</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>read</c-></code></span></a>
      <li><a href="#executionschedule_from"><span class="secno">6.13</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>schedule_from</c-></code></span></a>
      <li><a href="#executionthen"><span class="secno">6.14</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>then</c-></code></span></a>
      <li><a href="#executionupon_error"><span class="secno">6.15</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>upon_error</c-></code></span></a>
      <li><a href="#executionupon_stopped"><span class="secno">6.16</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>upon_stopped</c-></code></span></a>
      <li><a href="#executionbulk"><span class="secno">6.17</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>bulk</c-></code></span></a>
      <li><a href="#executionsplit"><span class="secno">6.18</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>split</c-></code></span></a>
      <li><a href="#executionwhen_all"><span class="secno">6.19</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>when_all</c-></code></span></a>
      <li><a href="#executionensure_started"><span class="secno">6.20</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>ensure_started</c-></code></span></a>
      <li><a href="#executionstart_detached"><span class="secno">6.21</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>start_detached</c-></code></span></a>
      <li><a href="#this_threadsync_wait"><span class="secno">6.22</span> <span class="content"><code class="highlight"><c- n>this_thread</c-><c- o>::</c-><c- n>sync_wait</c-></code></span></a>
      <li><a href="#executionreceiver_adaptor"><span class="secno">6.23</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>receiver_adaptor</c-></code></span></a>
      <li><a href="#executioncompletion_signatures"><span class="secno">6.24</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-></code></span></a>
      <li><a href="#executionmake_completion_signatures"><span class="secno">6.25</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>make_completion_signatures</c-></code></span></a>
      <li><a href="#executionas_awaitable"><span class="secno">6.26</span> <span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>as_awaitable</c-></code></span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>This paper proposes a refactorization of the receiver concepts of <a data-link-type="biblio" href="https://wg21.link/p2300r4">[P2300R4]</a> to
address concerns raised by LEWG during its design review related to the
requirement of an error channel that accepts <code class="highlight"><c- n>exception_ptr</c-></code>. The change to <code class="highlight"><c- n>receiver_of</c-></code> proposed herein enables a corresponding change to the <code class="highlight"><c- n>sender_to</c-></code> concept that strengthens type checking and removes some need to constrain
customizations of the <code class="highlight"><c- n>connect</c-></code> customization point.</p>
   <h3 class="heading settled" data-level="1.1" id="motivation"><span class="secno">1.1. </span><span class="content">Motivation</span><a class="self-link" href="#motivation"></a></h3>
   <p>In <a data-link-type="biblio" href="https://wg21.link/p2300r4">[P2300R4]</a>, the receiver concepts are currently expressed as follows:</p>
<pre class="language-c++ highlight"><c- n>template</c-> <c- o>&lt;</c-><c- n>class</c-> <c- n>T</c-><c- p>,</c-> <c- n>class</c-> <c- n>E</c-> <c- o>=</c-> <c- n>exception_ptr</c-><c- o>></c->
<c- n>concept</c-> <c- n>receiver</c-> <c- o>=</c->
  <c- n>move_constructible</c-><c- o>&lt;</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>></c-> <c- o>&amp;&amp;</c->
  <c- n>constructible_from</c-><c- o>&lt;</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>T</c-><c- o>></c-> <c- o>&amp;&amp;</c->
  <c- n>requires</c-><c- p>(</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>&amp;&amp;</c-> <c- n>t</c-><c- p>,</c-> <c- n>E</c-><c- o>&amp;&amp;</c-> <c- n>e</c-><c- p>)</c-> <c- p>{</c->
    <c- p>{</c-> <c- n>execution</c-><c- o>::</c-><c- n>set_stopped</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>t</c-><c- p>))</c-> <c- p>}</c-> <c- n>noexcept</c-><c- p>;</c->
    <c- p>{</c-> <c- n>execution</c-><c- o>::</c-><c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>t</c-><c- p>),</c-> <c- p>(</c-><c- n>E</c-><c- o>&amp;&amp;</c-><c- p>)</c-> <c- n>e</c-><c- p>)</c-> <c- p>}</c-> <c- n>noexcept</c-><c- p>;</c->
  <c- p>};</c->

<c- n>template</c-><c- o>&lt;</c-><c- n>class</c-> <c- n>T</c-><c- p>,</c-> <c- n>class</c-><c- p>...</c-> <c- n>An</c-><c- o>></c->
<c- n>concept</c-> <c- n>receiver_of</c-> <c- o>=</c->
  <c- n>receiver</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-> <c- o>&amp;&amp;</c->
  <c- n>requires</c-><c- p>(</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>&amp;&amp;</c-> <c- n>t</c-><c- p>,</c-> <c- n>An</c-><c- o>&amp;&amp;</c-><c- p>...</c-> <c- n>an</c-><c- p>)</c-> <c- p>{</c->
    <c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>t</c-><c- p>),</c-> <c- p>(</c-><c- n>An</c-><c- o>&amp;&amp;</c-><c- p>)</c-> <c- n>an</c-><c- p>...);</c->
  <c- p>};</c->
</pre>
   <p>During the design review of P2300, LEWG raised the following concerns about the
form of these concepts:</p>
   <ol>
    <li data-md>
     <p>Since <code class="highlight"><c- n>set_value</c-></code> is permitted to be potentially throwing, and since the
receiver type is not known when a sender is asked to compute its completion
signatures, most senders will need to pessimistically report that they can
complete exceptionally, when that may in fact not be true. This may cause the
instantiation of expensive error handling code that is effectively dead.</p>
    <li data-md>
     <p>No receiver <code class="highlight"><c- n>R</c-></code> can satisfy the <code class="highlight"><c- n>receiver</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-></code> or <code class="highlight"><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-></code> concepts without providing an error channel for <code class="highlight"><c- n>exception_ptr</c-></code>. This has the
following problems:</p>
     <ul>
      <li data-md>
       <p><code class="highlight"><c- n>exception_ptr</c-></code> is a relatively heavy-weight error type, not unlike a <code class="highlight"><c- n>shared_ptr</c-></code>. Requiring the presence of this channel is likely to cause
needless code generation.</p>
      <li data-md>
       <p>It makes it questionable whether any of P2300 can be reasonably expected
to work in freestanding environments, which often lack exception
handling support.</p>
     </ul>
   </ol>
   <p>Although the design of P2300 is sound, LEWG nevertheless wanted an investigation
into these issues and a recommendation to be made.</p>
   <p>This paper makes a recommendation to change the receiver concepts to address
these concerns.</p>
   <h3 class="heading settled" data-level="1.2" id="design-summary"><span class="secno">1.2. </span><span class="content">Design Summary</span><a class="self-link" href="#design-summary"></a></h3>
   <p>This paper proposes to make the following changes, summarized here without
commentary. Commentary is provided below.</p>
   <ul>
    <li data-md>
     <p>Remove the default implementation of the <code class="highlight"><c- n>get_env</c-></code> receiver query.</p>
    <li data-md>
     <p>The <code class="highlight"><c- n>receiver_of</c-></code> concept takes a receiver and an instance of the <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> class template.</p>
    <li data-md>
     <p>A receiver’s customization of <code class="highlight"><c- n>set_value</c-></code> is required to be <code class="highlight"><c- k>noexcept</c-></code>.</p>
    <li data-md>
     <p>The <code class="highlight"><c- n>sender_to</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Rcvr</c-><c- o>></c-></code> concept requires <code class="highlight"><c- n>Rcvr</c-></code> to accept all of <code class="highlight"><c- n>Sndr</c-></code>'s
completions.</p>
    <li data-md>
     <p><code class="highlight"><c- n>connect</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>rcvr</c-><c- p>)</c-></code> also requires <code class="highlight"><c- n>rcvr</c-></code> to accept all of <code class="highlight"><c- n>sndr</c-></code>'s completions.</p>
    <li data-md>
     <p><code class="highlight"><c- n>get_completion_signatures</c-></code> is required to return an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class template; the <code class="highlight"><c- n>value_types_of_t</c-></code> and <code class="highlight"><c- n>error_types_of_t</c-></code> template aliases remain unchanged.</p>
    <li data-md>
     <p>The <code class="highlight"><c- n>make_completion_signatures</c-></code> design is slightly tweaked to be more general.</p>
   </ul>
   <h3 class="heading settled" data-level="1.3" id="design-rationale"><span class="secno">1.3. </span><span class="content">Design Rationale</span><a class="self-link" href="#design-rationale"></a></h3>
   <p>The author believes these are all reasonable adjustments to the design of P2300,
but one may wonder why they were not considered before now.</p>
   <p>The fourth revision of P2300 brought with it some notable changes, the two most
significant of which are:</p>
   <ol>
    <li data-md>
     <p>Support for dependently-typed senders, where a sender’s completions can
depend on information that isn’t known independently of the execution
environment within which the sender will be initiated. For instance,
a <code class="highlight"><c- n>get_scheduler</c-><c- p>()</c-></code> sender which queries the receiver for the current
scheduler and then sends it through the value channel, cannot possibly
know the type of the scheduler it will send until it has been connected
to a receiver.</p>
    <li data-md>
     <p>Dropping of support for "untyped" senders, which do not declare their
completion signatures. Untyped senders were supported because of the lack
of dependently-typed senders, which ceased to be an issue with R4. At the
direction of LEWG, "untyped" senders were dropped, greatly simplifying
the design.</p>
   </ol>
   <p>Taken together, these two changes open up a huge piece of the design space. The
implication is that <b>a sender is <i>always</i> able to provide its completion
signatures.</b> This is new, and P2300R4 is not taking advantage of this extra
type information.</p>
   <p>The author realized that the extra type information can be leveraged to
accommodate LEWGs requests regarding the receiver interface, while at the same
time simplifying uses of <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>execution</c-></code> by permitting the library to take on
more of the type checking burden.</p>
   <p>The <code class="highlight"><c- n>sender_to</c-></code> concept, which checks whether a sender and a receiver can be
connected, now has perfect information: it can ask the receiver for the execution
environment; it can ask the sender how it will complete when initiated in that
environment; and it can ask the receiver if it is capable of receiving all of
the sender’s possible completions. This was not possible before R4.</p>
   <p>Below we look at each of the changes suggested in the summary and explain its
rationale in light of the extra information now available to the type system.</p>
   <h2 class="heading settled" data-level="2" id="design-details"><span class="secno">2. </span><span class="content">Design Details</span><a class="self-link" href="#design-details"></a></h2>
   <h3 class="heading settled" data-level="2.1" id="no-get-env-default"><span class="secno">2.1. </span><span class="content">Remove the default implementation of the <code class="highlight"><c- n>get_env</c-></code> receiver query.</span><a class="self-link" href="#no-get-env-default"></a></h3>
   <p>The presence of a customization of <code class="highlight"><c- n>get_env</c-></code> becomes the distinguishing feature
of receivers. A "receiver" no longer needs to provide any completion channels at
all to be considered a receiver, only <code class="highlight"><c- n>get_env</c-></code>.</p>
   <h3 class="heading settled" data-level="2.2" id="receiver-of-completion-signatures"><span class="secno">2.2. </span><span class="content">The <code class="highlight"><c- n>receiver_of</c-></code> concept takes a receiver and an instance of the <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> class template.</span><a class="self-link" href="#receiver-of-completion-signatures"></a></h3>
   <p>The <code class="highlight"><c- n>receiver_of</c-></code> concept, rather than accepting a receiver and some value
types, is changed to take a receiver and an instance of the <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> class template. A sender uses <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> to describe the signals with which it completes. The <code class="highlight"><c- n>receiver_of</c-></code> concept ensures that a particular receiver is capable of receiving
those signals.</p>
   <p>Notably, if a sender only sends a value (i.e., can never send an error or a
stopped signal), then a receiver need only provide a value channel to be
compatible with it.</p>
   <h3 class="heading settled" data-level="2.3" id="noexcept-set-value"><span class="secno">2.3. </span><span class="content">A receiver’s customization of <code class="highlight"><c- n>set_value</c-></code> is required to be <code class="highlight"><c- k>noexcept</c-></code>.</span><a class="self-link" href="#noexcept-set-value"></a></h3>
   <p>This makes it possible for many senders to become "no-fail"; that is, they
cannot complete with an error. <code class="highlight"><c- n>just</c-><c- p>(</c-><c- mi>1</c-><c- p>)</c-></code>, for instance, will only ever
successfully send an integer through the value channel. An adaptor such as <code class="highlight"><c- n>then</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>fun</c-><c- p>)</c-></code> can check whether <code class="highlight"><c- n>fun</c-></code> can ever exit exceptionally when
called with all the sets of values that <code class="highlight"><c- n>sndr</c-></code> may complete with. If so, the <code class="highlight"><c- n>then</c-></code> sender must add <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-></code> to its list of completions.
Otherwise, it need not.</p>
   <h3 class="heading settled" data-level="2.4" id="sender-to-requirements"><span class="secno">2.4. </span><span class="content">The <code class="highlight"><c- n>sender_to</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Rcvr</c-><c- o>></c-></code> concept requires <code class="highlight"><c- n>Rcvr</c-></code> to accept all of <code class="highlight"><c- n>Sndr</c-></code>'s completions.</span><a class="self-link" href="#sender-to-requirements"></a></h3>
   <p>The <code class="highlight"><c- n>sender_to</c-></code> concept, which checks whether a sender and a receiver can be
connected, now enforces that the sender’s completion signatures can in fact be
handled by the receiver. Previously, it only checked that <code class="highlight"><c- n>connect</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>rcvr</c-><c- p>)</c-></code> was well-formed, relying on sender authors to properly constrain their <code class="highlight"><c- n>connect</c-></code> customizations.</p>
   <h3 class="heading settled" data-level="2.5" id="connect-requirements"><span class="secno">2.5. </span><span class="content"><code class="highlight"><c- n>connect</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>rcvr</c-><c- p>)</c-></code> also requires <code class="highlight"><c- n>rcvr</c-></code> to accept all of <code class="highlight"><c- n>sndr</c-></code>'s completions.</span><a class="self-link" href="#connect-requirements"></a></h3>
   <p>For good measure, the <code class="highlight"><c- n>connect</c-></code> customization point also checks whether a
receiver can receive all of the sender’s possible completions before trying to
dispatch via <code class="highlight"><c- n>tag_invoke</c-></code> to a <code class="highlight"><c- n>connect</c-></code> customization. This often entirely
frees sender authors from having to constrain their <code class="highlight"><c- n>connect</c-></code> customizations at
all. It is enough to customize <code class="highlight"><c- n>get_completion_signatures</c-></code>, and the type
checking is done automatically.</p>
   <p>Strictly speaking, with this change, the change to <code class="highlight"><c- n>sender_to</c-></code> is unnecessary.
The change to <code class="highlight"><c- n>sender_to</c-></code> results in better diagnostics, in the author’s
experience.</p>
   <h3 class="heading settled" data-level="2.6" id="get-completion-signatures"><span class="secno">2.6. </span><span class="content"><code class="highlight"><c- n>get_completion_signatures</c-></code> is required to return an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class template.</span><a class="self-link" href="#get-completion-signatures"></a></h3>
   <p><code class="highlight"><c- n>get_completion_signatures</c-></code> was added in R4 in response to feedback that
authoring sender traits was too difficult/arcane. Rather than defining a struct
with <code class="highlight"><c- k>template</c-> <c- k>template</c-></code> aliases, a user can simply declare a sender’s
completions as:</p>
<pre class="language-c++ highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c->
  <c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(</c-><c- b>int</c-><c- p>),</c->
  <c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>exception_ptr</c-><c- p>),</c->
  <c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>></c->
</pre>
   <p>In R4, <code class="highlight"><c- n>completion_signatures</c-></code> generated the <code class="highlight"><c- k>template</c-> <c- k>template</c-></code> aliases for
you. The proposed change is to take it further and <em>require</em> <code class="highlight"><c- n>get_completion_signatures</c-></code> to return an instance of the <code class="highlight"><c- n>completion_signatures</c-></code> class template. With this change, the last vestige of the old sender traits
design with its unloved <code class="highlight"><c- n>temlate</c-> <c- k>template</c-></code> alias interface is swept away. <code class="highlight"><c- n>completion_signatures</c-></code> entirely replaces sender traits, further simplifying the
design.</p>
   <p>The <code class="highlight"><c- n>sender</c-></code> concept enforces the new requirement.</p>
   <h3 class="heading settled" data-level="2.7" id="sender-traits-aliases"><span class="secno">2.7. </span><span class="content">The <code class="highlight"><c- n>value_types_of_t</c-></code> and <code class="highlight"><c- n>error_types_of_t</c-></code> template aliases remain.</span><a class="self-link" href="#sender-traits-aliases"></a></h3>
   <p>It can still be helpful sometimes to <em>consume</em> the old <code class="highlight"><c- k>template</c-> <c- k>template</c-></code>, say,
for generating a variant of the tuples of all the sets of a sender’s value
types. For that reason, the alias templates <code class="highlight"><c- n>value_types_of_t</c-></code> and <code class="highlight"><c- n>error_types_of_t</c-></code> retain the same interface and semantic as before. For
instance, generating the variant of tuples of value types, you would use the
following:</p>
<pre class="language-c++ highlight"><c- n>execution</c-><c- o>::</c-><c- n>value_types_of_t</c-><c- o>&lt;</c->
  <c- n>Sndr</c-><c- p>,</c->
  <c- n>Env</c-><c- p>,</c->
  <c- n>std</c-><c- o>::</c-><c- n>tuple</c-><c- p>,</c->
  <c- n>std</c-><c- o>::</c-><c- n>variant</c-><c- o>></c-><c- p>;</c->
</pre>
   <p>Additionally, these two alias joined by a <code class="highlight"><c- n>sends_stopped</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-></code> Boolean
variable template to complete the set.</p>
   <h3 class="heading settled" data-level="2.8" id="make-completion-signatures"><span class="secno">2.8. </span><span class="content">The <code class="highlight"><c- n>make_completion_signatures</c-></code> design is slightly tweaked to be more general.</span><a class="self-link" href="#make-completion-signatures"></a></h3>
   <p>In the proposed design, <code class="highlight"><c- n>completion_signatures</c-></code> plays a much larger role.
Accordingly, the job of specifying the completion signatures of custom sender
adaptors also becomes more important, necessitating better tools. The <code class="highlight"><c- n>make_completion_signatures</c-></code>, new to R4, narrowly misses being that better tool.</p>
   <p>In R4, <code class="highlight"><c- n>make_completion_signatures</c-></code> has the following interface:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c->
  <c- n>execution</c-><c- o>::</c-><c- n>sender</c-> <c- n>Sndr</c-><c- p>,</c->
  <c- k>class</c-> <c- nc>Env</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>no_env</c-><c- p>,</c->
  <c- k>class</c-> <c- nc>OtherSigs</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;></c-><c- p>,</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetValue</c-> <c- o>=</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i><c- p>,</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetError</c-> <c- o>=</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></i><c- p>,</c->
  <c- b>bool</c-> <c- n>SendsStopped</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>>::</c-><c- n>sends_stopped</c-><c- o>></c->
    <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c->
<c- k>using</c-> <c- n>make_completion_signatures</c-> <c- o>=</c->
  <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- d>/* see below */</c-><c- o>></c-><c- p>;</c->
</pre>
   <p>In the R4 design, <code class="highlight"><c- n>SetValue</c-></code> and <code class="highlight"><c- n>SetError</c-></code> are alias templates, instantiations
of which are required to name function types whose return types are <code class="highlight"><c- n>excecution</c-><c- o>::</c-><c- n>set_value_t</c-></code> and <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-></code>, respectively. This is
overly-restrictive. The problems with it are:</p>
   <ol>
    <li data-md>
     <p>It is not possible to map one kind of completion into a different kind. For
instance, the <code class="highlight"><c- n>upon_error</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>fun</c-><c- p>)</c-></code> maps error completions into value
completions.</p>
    <li data-md>
     <p>It is not possible to map a single completion signature into multiple
different completions. For instance, the <code class="highlight"><c- n>let_value</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>fun</c-><c- p>)</c-></code> sender
adaptor needs to map a set of <code class="highlight"><c- n>sndr</c-></code>'s value types into the set of
completions of whatever sender that is returned from <code class="highlight"><c- n>fun</c-><c- p>(</c-><c- n>values</c-><c- p>...)</c-></code>, which
is likely more than one.</p>
   </ol>
   <p>In addition, the final Boolean <code class="highlight"><c- n>SendsStopped</c-></code> parameter merely controls whether
or not the completion <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-></code> should be added to the
resulting list of completion signatures. This doesn’t help a sender adaptor
such as <code class="highlight"><c- n>let_stopped</c-><c- p>(</c-><c- n>sndr</c-><c- p>,</c-> <c- n>fun</c-><c- p>)</c-></code>, which needs to transform a stopped signal
into the set of completions of the sender that <code class="highlight"><c- n>fun</c-><c- p>()</c-></code> returns.</p>
   <p>This design proposes to change the three final template arguments as follows:</p>
   <ul>
    <li data-md>
     <p><u><b><code class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetValue</c-></code>:</b></u> Instantiations of this alias
template must name an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class
template.</p>
    <li data-md>
     <p><u><b><code class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetError</c-></code>:</b></u> Instantiations of this alias
template must name an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class
template.</p>
    <li data-md>
     <p><u><b><code class="highlight"><c- k>class</c-> <c- nc>SetStopped</c-></code>:</b></u> Must name an instantiation of the <code class="highlight"><c- n>completion_signatures</c-></code> class template. If the sender <code class="highlight"><c- n>Sndr</c-></code> can complete
with <code class="highlight"><c- n>set_stopped</c-></code>, then these signatures are included in the resulting list
of completions. Otherwise, this template parameter is ignored.</p>
   </ul>
   <p>The semantics of <code class="highlight"><c- n>make_completion_signatures</c-></code> is likewise simplified: The three
template arguments, <code class="highlight"><c- n>SetValue</c-></code>, <code class="highlight"><c- n>SetError</c-></code>, and <code class="highlight"><c- n>SetStopped</c-></code>, are used to map
each of a sender’s completions into a list of completions which are all
concatenated together, along with any additional signatures specified by the <code class="highlight"><c- n>OtherSigs</c-></code> list, and made unique.</p>
   <h2 class="heading settled" data-level="3" id="considerations"><span class="secno">3. </span><span class="content">Considerations</span><a class="self-link" href="#considerations"></a></h2>
   <h3 class="heading settled" data-level="3.1" id="nothrow-set-value"><span class="secno">3.1. </span><span class="content">Implications of <code class="highlight"><c- k>noexcept</c-></code> <code class="highlight"><c- n>set_value</c-></code></span><a class="self-link" href="#nothrow-set-value"></a></h3>
   <p>The role of <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code> is to execute a continuation on the success
of the predecessor. A continuation is arbitrary code, and surely arbitrary code
can exit exceptionally, so how can we require <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code> to be <code class="highlight"><c- k>noexcept</c-></code>?</p>
   <p>The answer has two parts:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code> always has the option of accepting arguments by
forwarding reference and executing any potentially throwing operations
within a <code class="highlight"><c- k>try</c-></code>/<code class="highlight"><c- k>catch</c-></code> block, routing any exceptions to <code class="highlight"><c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>exception_ptr</c-><c- p>)</c-></code>.</p>
    <li data-md>
     <p>A sender knows what types it will send and with what value category. The <code class="highlight"><c- n>sender_to</c-></code> concept checks that none of the <code class="highlight"><c- n>set_value</c-></code> expression(s) it
will execute are potentially throwing. This doesn’t necessitate that all
receivers accept all arguments by forwarding reference, however. For
instance, if a sender knows it will pass an rvalue <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>string</c-></code> to the
receiver’s <code class="highlight"><c- n>set_value</c-></code>, and if the sender is connected to a receiver whose <code class="highlight"><c- n>set_value</c-></code> takes a <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>string</c-></code> by value, that will type-check. The <code class="highlight"><c- n>sender_to</c-></code> concept will essentially be enforcing this constraint:</p>
<pre class="highlight"><c- k>requires</c-> <c- p>(</c-><c- n>Receiver</c-> <c- n>rcvr</c-><c- p>)</c-> <c- p>{</c->
  <c- p>{</c-> <c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>rcvr</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>string</c-><c- p>())</c-> <c- p>}</c-> <c- k>noexcept</c-><c- p>;</c->
<c- p>}</c->
</pre>
     <p>Since <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>string</c-></code>'s move constructor is <code class="highlight"><c- k>noexcept</c-></code>, this constraint
    is satisfied regardless of whether <code class="highlight"><c- n>rcvr</c-></code>'s <code class="highlight"><c- n>set_value</c-></code> customization
    accepts the string by value or by reference.</p>
   </ol>
   <h3 class="heading settled" data-level="3.2" id="diagnostics"><span class="secno">3.2. </span><span class="content">Diagnostics</span><a class="self-link" href="#diagnostics"></a></h3>
   <p>On the whole, the authors of P2300 feel that this design change is the right one
to make to meet LEWG’s requirements. It comes with one drawback, however: The
satisfaction checking of the <code class="highlight"><c- n>receiver_of</c-></code> concept, which must now check against
a set of signatures specified in a type-list, now requires metaprogramming in
addition to <code class="highlight"><c- k>requires</c-></code> clauses. As a result, diagnostics can suffer.</p>
   <p>During the implementation experience, the author was able to surface a
relatively suscinct and accurate error for, say, the lack of a particular
completion channel on a receiver, by employing several tricks. While regrettable
that such tricks are required, we do not feel that the issue of mediocre
diagnostics is dire enough to offset the many advantages of the design presented
here.</p>
   <p>In addition, the author has discovered a way that an implementation may choose
to extend the <code class="highlight"><c- n>connect</c-></code> customization point in a way that permits users to
bypass the constraint checking entirely, thus generating a deep instantiation
backtrace that often greatly assists the debugging of custom
sender/receiver-based algorithms. This mechanism can be enshrined in the standard
as "recommended practice."</p>
   <h2 class="heading settled" data-level="4" id="open-questions"><span class="secno">4. </span><span class="content">Open questions</span><a class="self-link" href="#open-questions"></a></h2>
   <h3 class="heading settled" data-level="4.1" id="fno-exceptions"><span class="secno">4.1. </span><span class="content">Weasel wording for <code class="highlight"><c- o>-</c-><c- n>fno</c-><c- o>-</c-><c- n>exceptions</c-></code></span><a class="self-link" href="#fno-exceptions"></a></h3>
   <p>We may need to add some weasel wording to the effect that:</p>
   <blockquote>
    <p>... if an implementation is able to deduce that all of its operations are not
potentially throwing, a conforming implementation of the algorithms in
&lt;section> may omit <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-></code> from any sender’s list of
completion signatures.</p>
   </blockquote>
   <p>If an implementation doesn’t support exceptions, e.g., if the user is compiling
with <code class="highlight"><c- o>-</c-><c- n>fno</c-><c- o>-</c-><c- n>exceptions</c-></code>, it can safely assume that an expression <code class="highlight"><c- n>expr</c-></code> is not
going to exit exceptionally regardless of the value of <code class="highlight"><c- k>noexcept</c-><c- p>(</c-><c- n>expr</c-><c- p>)</c-></code>. An
implementation shouldn’t be required to report that it can complete with an
exception in that case.</p>
   <h3 class="heading settled" data-level="4.2" id="allocations"><span class="secno">4.2. </span><span class="content">Error channel of allocating algorithms</span><a class="self-link" href="#allocations"></a></h3>
   <p>An interesting question is what to do on freestanding implementations for those
algorithms that necessarily must allocate. Those algorithms, as P2300 stands
today, will always have a <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-></code> completion signature. The
possibilities I see are:</p>
   <ul>
    <li data-md>
     <p>Permit implementations to omit the exceptional completion signature when it
knows allocations can’t fail with an exception (see above),</p>
    <li data-md>
     <p>Replace the exceptional completion signature with <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>error_code</c-><c- p>)</c-></code>, and call the receiver with <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>make_error_code</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>errc</c-><c- o>::</c-><c- n>not_enough_memory</c-><c- p>)</c-></code> on allocation failure.</p>
    <li data-md>
     <p>Replace the exceptional completion signature with <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>bad_alloc</c-><c- p>)</c-></code>; that is, pass an instance of the <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bad_alloc</c-></code> exception type through the error channel by value. (From
what the author can infer, freestanding implementations are required to
provide the <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>bad_alloc</c-></code> type even when actually throwing exceptions is
not supported.)</p>
   </ul>
   <h2 class="heading settled" data-level="5" id="implementation-experience"><span class="secno">5. </span><span class="content">Implementation experience</span><a class="self-link" href="#implementation-experience"></a></h2>
   <p>The design described above has been implemented in a branch of the reference
implementation which can be found in the following GitHub pull request:
https://github.com/brycelelbach/wg21_p2300_std_execution/pull/410.</p>
   <p>The change, while somewhat disruptive to the reference implementation itself,
had the benefits described above; namely:</p>
   <ul>
    <li data-md>
     <p>Stricter type-checking "for free". Sender authors need only report the
completion signatures, and the concepts and customization points of the
library do all the heavy lifting to make sure the capabilities of receivers
match the requirements of the senders.</p>
    <li data-md>
     <p>More "no-fail" senders. Many fewer of the senders need an error channel at
all, and the ones that do generally need it only conditionally, when working
with potentially-thrwoing callables or types whose special operations can
throw. Only those few senders that must dynamically allocate state necessarily
need a <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-></code> channel, and we may even choose to change
those to use something like <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>bad_alloc</c-><c- p>)</c-></code> instead.</p>
    <li data-md>
     <p>No required <code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-></code> or <code class="highlight"><c- n>set_stopped_t</c-><c- p>()</c-></code> channels at all.</p>
   </ul>
   <p>In addition, in the author’s opinion, the reference implementation got
significantly <em>simpler</em> for the change, and the pull request removes more lines
than it adds, while adding functionality at the same time.</p>
   <h2 class="heading settled" data-level="6" id="proposed-wording"><span class="secno">6. </span><span class="content">Proposed wording</span><a class="self-link" href="#proposed-wording"></a></h2>
   <p>The following changes are relative to <a data-link-type="biblio" href="https://wg21.link/p2300r4">[P2300R4]</a>.</p>
   <h3 class="heading settled" data-level="6.1" id="header-execution-synopsis"><span class="secno">6.1. </span><span class="content">Header <code class="highlight"><c- o>&lt;</c-><c- n>execution</c-><c- o>></c-></code> synopsis</span><a class="self-link" href="#header-execution-synopsis"></a></h3>
   <p>In [exec.syn], apply the following changes:</p>
<pre class="highlight"><c- k>namespace</c-> <c- n>std</c-><c- o>::</c-><c- n>execution</c-> <c- p>{</c->
  <c- c1>// [exec.recv], receivers</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><del><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>exception_ptr</c-></del><c- o>></c->
    <c- k>concept</c-> <c- nc>receiver</c-> <c- o>=</c-> <i><c- n>see</c-><c- o>-</c-><c- n>below</c-></i><c- p>;</c->

  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><c- p>,</c-> <del><c- k>class</c-><c- p>...</c-> <c- n>An</c-></del><ins><c- n>class</c-> <c- n>Completions</c-></ins><c- o>></c->
    <c- k>concept</c-> <c- nc>receiver_of</c-> <c- o>=</c-> <i><c- n>see</c-><c- o>-</c-><c- n>below</c-></i><c- p>;</c->

  <c- p>...</c->
  <del>
  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- o>></c->
     <c- k>concept</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>sender</c-><c- o>-</c-><c- n>types</c-></i> <c- o>=</c-> <i><c- n>see</c-><c- o>-</c-><c- n>below</c-></i><c- p>;</c-> <c- c1>// exposition only</c-></del>

  <c- p>...</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c-> <ins><c- c1>// arguments are not associated entities ([lib.tmpl-heads])</c-></ins>
    <c- k>struct</c-> <c- nc>dependent_completion_signatures</c-><c- p>;</c->

  <c- p>...</c->
  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c->
          <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c->
          <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Tuple</c-> <c- o>=</c-> <i><c- n>decayed</c-><c- o>-</c-><c- n>tuple</c-></i><c- p>,</c->
          <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-> <c- o>=</c-> <i><c- n>variant</c-><c- o>-</c-><c- n>or</c-><c- o>-</c-><c- n>empty</c-></i><c- o>></c->
      <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
    <c- k>using</c-> <c- n>value_types_of_t</c-> <c- o>=</c->
      <del><c- k>typename</c-> <c- nc>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>S</c-><c- o>>::</c-><c- k>template</c-> <c- n>value_types</c-><c- o>&lt;</c-><c- n>Tuple</c-><c- p>,</c-> <c- n>Variant</c-><c- o>></c-></del>
      <ins><i><c- n>see</c-> <c- n>below</c-></i></ins><c- p>;</c->

  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c->
          <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c->
          <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-> <c- o>=</c-> <i><c- n>variant</c-><c- o>-</c-><c- n>or</c-><c- o>-</c-><c- n>empty</c-></i><c- o>></c->
      <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
    <c- k>using</c-> <c- n>error_types_of_t</c-> <c- o>=</c->
      <del><c- k>typename</c-> <c- nc>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>S</c-><c- o>>::</c-><c- k>template</c-> <c- n>error_types</c-><c- o>&lt;</c-><c- n>Variant</c-><c- o>></c-></del>
      <ins><i><c- n>see</c-> <c- n>below</c-></i></ins><c- p>;</c->
  <ins>
  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- o>></c->
      <c- n>requries</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
    <c- kr>inline</c-> <c- k>constexpr</c-> <c- b>bool</c-> <c- n>sends_stopped</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c-></ins>

  <c- p>...</c->
  <c- c1>// [exec.utils.cmplsigs]</c->
  <c- k>template</c-> <c- o>&lt;</c-><i><c- n>completion</c-><c- o>-</c-><c- n>signature</c-></i><c- p>...</c-> <c- n>Fns</c-><c- o>></c-><del> <c- c1>// arguments are not associated entities ([lib.tmpl-heads])</c-></del>
    <c- k>struct</c-> <c- nc>completion_signatures</c-><ins> <c- p>{}</c-></ins><c- p>;</c->

  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Args</c-><c- o>></c-> <i><c- c1>// exposition only</c-></i>
    <c- k>using</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i> <c- o>=</c->
      <ins><c- n>completion_signatures</c-><c- o>&lt;</c-></ins><c- n>set_value_t</c-><c- p>(</c-><c- n>Args</c-><c- p>...)</c-><ins><c- o>></c-></ins><c- p>;</c->

  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Err</c-><c- o>></c-> <i><c- c1>// exposition only</c-></i>
    <c- k>using</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></i> <c- o>=</c->
      <ins><c- n>completion_signatures</c-><c- o>&lt;</c-></ins><c- n>set_error_t</c-><c- p>(</c-><c- n>Err</c-><c- p>)</c-><ins><c- o>></c-></ins><c- p>;</c->
  <ins>
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Sigs</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-><c- o>></c-> <c- c1>// exposition only</c->
    <c- k>concept</c-> <i><c- nc>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-></i> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c-></ins>

  <c- c1>// [exec.utils.mkcmplsigs]</c->
  <c- k>template</c-> <c- o>&lt;</c->
    <c- n>sender</c-> <c- n>Sndr</c-><c- p>,</c->
    <c- k>class</c-> <c- nc>Env</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c->
    <del><c- n>class</c-></del><ins><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-></i></ins> <c- n>AddlSigs</c-> <c- o>=</c-> <c- n>completion_signatures</c-><c- o>&lt;></c-><c- p>,</c->
    <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetValue</c-> <c- o>=</c-> <i><del><c- d>/* see below */</c-></del><ins><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></ins></i><c- p>,</c->
    <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetError</c-> <c- o>=</c-> <i><del><c- d>/* see below */</c-></del><ins><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></ins></i><c- p>,</c->
    <del><c- b>bool</c-> <c- n>SendsStopped</c-> <c- o>=</c-> <c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>>::</c-><c- n>sends_stopped</c-><c- o>></c-></del>
    <ins><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-></i> <c- n>SetStopped</c-> <c- o>=</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>>></c-></ins>
      <c- k>requires</c-> <c- n>sender</c-><sndrU0002C env>
  <c- k>using</c-> <c- n>make_completion_signatures</c-> <c- o>=</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><i><c- d>/* see below */</c-></i><c- o>></c-><c- p>;</c->
</sndrU0002C></pre>
   <h3 class="heading settled" data-level="6.2" id="executionget_env"><span class="secno">6.2. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>get_env</c-></code></span><a class="self-link" href="#executionget_env"></a></h3>
   <p>Change [exec.get_env] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>get_env</c-></code> is a customization point object. For some subexpression <code class="highlight"><c- n>r</c-></code>, <code class="highlight"><c- n>get_env</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is expression-equivalent to</p>
     <ol>
      <li data-md>
       <p><code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>execution</c-><c- o>::</c-><c- n>get_env</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> if that expression is well-formed.</p>
       <ins>
        <ul>
         <li data-md>
          <p><i>Mandates:</i> The decayed type of the above expression is not <code class="highlight"><c- n>no_env</c-></code>.</p>
        </ul>
       </ins>
      <li data-md>
       <p>
        Otherwise, 
        <del><code class="highlight"><i><c- n>empty</c-><c- o>-</c-><c- n>env</c-></i><c- p>{}</c-></code></del>
        <ins><code class="highlight"><c- n>get_env</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is ill-formed</ins>
        .
       </p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="6.3" id="receivers"><span class="secno">6.3. </span><span class="content">Receivers</span><a class="self-link" href="#receivers"></a></h3>
   <p>In [exec.recv], replace paragraphs 1 and 2 with the following:</p>
   <div class="ins">
    <ol>
     <li data-md>
      <p>A <i>receiver</i> represents the continuation of an asynchronous operation.
An asynchronous operation may complete with a (possibly empty) set of
values, an error, or it may be cancelled. A receiver has three principal
operations corresponding to the three ways an asynchronous operation may
complete: <code class="highlight"><c- n>set_value</c-></code>, <code class="highlight"><c- n>set_error</c-></code>, and <code class="highlight"><c- n>set_stopped</c-></code>. These are
collectively known as a receiver’s <i>completion-signal operations</i>.</p>
     <li data-md>
      <p>The <code class="highlight"><c- n>receiver</c-></code> concept defines the requirements for a receiver type with an
unknown set of completion signatures. The <code class="highlight"><c- n>receiver_of</c-></code> concept defines the
requirements for a receiver type with a known set of completion signatures.</p>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><c- o>></c->
  <c- k>concept</c-> <c- nc>receiver</c-> <c- o>=</c->
    <c- n>move_constructible</c-><c- o>&lt;</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>></c-> <c- o>&amp;&amp;</c->
    <c- n>constructible_from</c-><c- o>&lt;</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>T</c-><c- o>></c-> <c- o>&amp;&amp;</c->
    <c- k>requires</c-><c- p>(</c-><c- k>const</c-> <c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>&amp;</c-> <c- n>t</c-><c- p>)</c-> <c- p>{</c->
      <c- n>execution</c-><c- o>::</c-><c- n>get_env</c-><c- p>(</c-><c- n>t</c-><c- p>);</c->
    <c- p>};</c->

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Signature</c-><c- p>,</c-> <c- k>class</c-> <c- nc>T</c-><c- o>></c->
  <c- k>concept</c-> <i><c- nc>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- k>for</c-></i> <c- o>=</c-> <i><c- c1>// exposition only</c-></i>
    <c- k>requires</c-> <c- p>(</c-><c- n>Signature</c-><c- o>*</c-> <c- n>sig</c-><c- p>)</c-> <c- p>{</c->
        <c- p>[]</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>Ret</c-><c- p>,</c-> <c- k>class</c-><c- p>...</c-> <c- n>Args</c-><c- o>></c-><c- p>(</c-><c- n>Ret</c-><c- p>(</c-><c- o>*</c-><c- p>)(</c-><c- n>Args</c-><c- p>...))</c->
            <c- k>requires</c-> <c- n>nothrow_tag_invocable</c-><c- o>&lt;</c-><c- n>Ret</c-><c- p>,</c-> <c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>,</c-> <c- n>Args</c-><c- p>...</c-><c- o>></c->
        <c- p>{}(</c-><c- n>sig</c-><c- p>);</c->
    <c- p>};</c->

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><c- p>,</c-> <c- k>class</c-> <c- nc>Completions</c-><c- o>></c->
  <c- k>concept</c-> <c- nc>receiver_of</c-> <c- o>=</c->
    <c- n>receiver</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c-> <c- o>&amp;&amp;</c->
    <c- k>requires</c-> <c- p>(</c-><c- n>Completions</c-><c- o>*</c-> <c- n>completions</c-><c- p>)</c-> <c- p>{</c->
        <c- p>[]</c-><c- o>&lt;</c-><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- k>for</c-></i><c- o>&lt;</c-><c- n>T</c-><c- o>></c-><c- p>...</c-><c- n>Sigs</c-><c- o>></c-><c- p>(</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Sigs</c-><c- p>...</c-><c- o>>*</c-><c- p>)</c->
        <c- p>{}(</c-><c- n>completions</c-><c- p>);</c->
    <c- p>};</c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.4" id="executionset_value"><span class="secno">6.4. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code></span><a class="self-link" href="#executionset_value"></a></h3>
   <p>Change [exec.set_value] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code> is used to send a <i>value completion signal</i> to a receiver.</p>
    <li data-md>
     <p>The name <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-></code> denotes a customization point object. The
expression <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>R</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...)</c-></code> for some subexpressions <code class="highlight"><c- n>R</c-></code> and <code class="highlight"><c- n>Vs</c-><c- p>...</c-></code> is expression-equivalent to:</p>
     <ol>
      <li data-md>
       <p><code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>,</c-> <c- n>R</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...)</c-></code>, if that expression is
valid. If the function selected by <code class="highlight"><c- n>tag_invoke</c-></code> does not send the
value(s) <code class="highlight"><c- n>Vs</c-><c- p>...</c-></code> to the receiver <code class="highlight"><c- n>R</c-></code>’s value channel, the behavior of
calling <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>R</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...)</c-></code> is undefined.</p>
       <ins>
        <ul>
         <li data-md>
          <p><i>Mandates:</i> The <code class="highlight"><c- n>tag_invoke</c-></code> expression above is not potentially
throwing.</p>
        </ul>
       </ins>
      <li data-md>
       <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>R</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...)</c-></code> is ill-formed.</p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="6.5" id="senders"><span class="secno">6.5. </span><span class="content">Senders</span><a class="self-link" href="#senders"></a></h3>
   <p>Change [exec.snd] as follows:</p>
   <ol>
    <li data-md>
     <p>A sender describes a potentially asynchronous operation. A sender’s responsibility is to fulfill the receiver contract of a connected receiver by delivering one of the receiver completion-signals.</p>
    <li data-md>
     <p>The <code class="highlight"><c- n>sender</c-></code> concept defines the requirements for a sender type. The <code class="highlight"><c- n>sender_to</c-></code> concept defines the requirements for a sender type capable of being connected with a specific receiver type.</p>
<pre class="highlight"><div class="del"><c- k>template</c-><c- o>&lt;</c-><c- k>template</c-><c- o>&lt;</c-><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- p>,</c-> <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- o>></c-> <c- k>class</c-><c- o>></c->
  <c- k>struct</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>types</c-></i><c- p>;</c-> <c- c1>// exposition only</c->

<c- k>template</c-><c- o>&lt;</c-><c- k>template</c-><c- o>&lt;</c-><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- o>></c-> <c- k>class</c-><c- o>></c->
  <c- k>struct</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>types</c-></i><c- p>;</c-> <c- c1>// exposition only</c->

<c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- o>></c->
  <c- k>concept</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>sender</c-><c- o>-</c-><c- n>types</c-></i> <c- o>=</c-> <c- c1>// exposition only</c->
    <c- k>requires</c-> <c- p>{</c->
      <c- k>typename</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>types</c-></i><c- o>&lt;</c-><c- n>S</c-><c- o>::</c-><c- k>template</c-> <c- n>value_types</c-><c- o>></c-><c- p>;</c->
      <c- k>typename</c-> <i><c- nc>has</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>types</c-></i><c- o>&lt;</c-><c- n>S</c-><c- o>::</c-><c- k>template</c-> <c- n>error_types</c-><c- o>></c-><c- p>;</c->
      <c- k>typename</c-> <c- nc>bool_constant</c-><c- o>&lt;</c-><c- n>S</c-><c- o>::</c-><c- n>sends_stopped</c-><c- o>></c-><c- p>;</c->
    <c- p>};</c-></div>
<div class="ins"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><c- p>,</c-> <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>C</c-><c- o>></c->
  <c- kr>inline</c-> <c- k>constexpr</c-> <c- b>bool</c-> <i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i> <c- o>=</c-> false<c- p>;</c-> <c- c1>// exposition only</c->

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Ts</c-><c- p>,</c-> <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>C</c-><c- o>></c->
  <c- kr>inline</c-> <c- k>constexpr</c-> <c- b>bool</c-> <i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>C</c-><c- o>&lt;</c-><c- n>Ts</c-><c- p>...</c-><c- o>></c-><c- p>,</c-> <c- n>C</c-><c- o>></c-> <c- o>=</c-> true<c- p>;</c->

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Sigs</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <c- k>concept</c-> <i><c- nc>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-></i> <c- o>=</c-> <c- c1>// exposition only</c->
    <i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>completion_signatures</c-><c- o>></c-> <c- o>||</c->
    <c- p>(</c->
      <c- n>same_as</c-><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>no_env</c-><c- o>>></c-> <c- o>&amp;&amp;</c->
      <c- n>same_as</c-><c- o>&lt;</c-><c- n>E</c-><c- p>,</c-> <c- n>no_env</c-><c- o>></c->
    <c- p>);</c-></div>

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <c- k>concept</c-> <i><c- nc>sender</c-><c- o>-</c-><c- n>base</c-></i> <c- o>=</c-> <c- c1>// exposition only</c->
    <del><c- k>requires</c-> <c- p>{</c-> <c- k>typename</c-> <c- nc>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-><c- p>;</c-> <c- p>}</c-> <c- o>&amp;&amp;</c->
    <i><c- n>has</c-><c- o>-</c-><c- n>sender</c-><c- o>-</c-><c- n>types</c-></i><c- o>&lt;</c-><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>>></c-></del>
    <ins><c- k>requires</c-> <c- p>(</c-><c- n>S</c-><c- o>&amp;&amp;</c-> <c- n>s</c-><c- p>,</c-> <c- n>E</c-><c- o>&amp;&amp;</c-> <c- n>e</c-><c- p>)</c-> <c- p>{</c->
      <c- p>{</c-> <c- n>get_completion_signatures</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>S</c-><c- o>></c-><c- p>(</c-><c- n>s</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-><c- p>(</c-><c- n>e</c-><c- p>))</c-> <c- p>}</c-> <c- o>-></c->
        <i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-></i><c- o>&lt;</c-><c- n>E</c-><c- o>></c-><c- p>;</c->
    <c- p>}</c-></ins><c- p>;</c->

<c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- o>></c->
  <c- k>concept</c-> <c- nc>sender</c-> <c- o>=</c->
    <i><c- n>sender</c-><c- o>-</c-><c- n>base</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-> <c- o>&amp;&amp;</c->
    <i><c- n>sender</c-><c- o>-</c-><c- n>base</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>no_env</c-><c- o>></c-> <c- o>&amp;&amp;</c->
    <c- n>move_constructible</c-><c- o>&lt;</c-><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>S</c-><c- o>>></c-><c- p>;</c->

<c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>R</c-><c- o>></c->
  <c- k>concept</c-> <c- nc>sender_to</c-> <c- o>=</c->
    <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- o>&amp;&amp;</c->
    <del><c- n>receiver</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-> <c- o>&amp;&amp;</c-></del>
    <ins><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>>></c-> <c- o>&amp;&amp;</c-></ins>
    <c- k>requires</c-> <c- p>(</c-><c- n>S</c-><c- o>&amp;&amp;</c-> <c- n>s</c-><c- p>,</c-> <c- n>R</c-><c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
      <c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>S</c-><c- o>></c-><c- p>(</c-><c- n>s</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>));</c->
    <c- p>};</c->
</pre>
    <li data-md>
     <p>The <code class="highlight"><c- n>sender_of</c-></code> concept defines the requirements for a sender type that on successful completion sends the specified set of value types.</p>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c-> <c- k>class</c-><c- p>...</c-> <c- n>Ts</c-><c- o>></c->
  <c- k>concept</c-> <c- nc>sender_of</c-> <c- o>=</c->
    <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-> <c- o>&amp;&amp;</c->
    <c- n>same_as</c-><c- o>&lt;</c->
      <i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- o>&lt;</c-><c- n>Ts</c-><c- p>...</c-><c- o>></c-><c- p>,</c->
      <del><c- k>typename</c-> <c- nc>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>>::</c-><c- k>template</c-> <c- n>value_types</c-><c- o>&lt;</c-><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- p>,</c-> <c- n>type_identity_t</c-><c- o>></c-></del>
      <ins><c- n>value_types_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- p>,</c-> <c- n>type_identity_t</c-><c- o>></c-></ins>
    <c- o>></c-><c- p>;</c->
</pre>
   </ol>
   <h3 class="heading settled" data-level="6.6" id="executioncompletion_signatures_of_t"><span class="secno">6.6. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures_of_t</c-></code></span><a class="self-link" href="#executioncompletion_signatures_of_t"></a></h3>
   <p>Change [exec.sndtraitst]/p4 as follows:</p>
   <ol start="4">
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>get_completion_signatures</c-></code> is a customization point object. Let <code class="highlight"><c- n>s</c-></code> be an expression such that <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s</c-><c- p>))</c-></code> is <code class="highlight"><c- n>S</c-></code>, and let <code class="highlight"><c- n>e</c-></code> be an
expression such that <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code> is <code class="highlight"><c- n>E</c-></code>. Then <code class="highlight"><c- n>get_completion_signatures</c-><c- p>(</c-><c- n>s</c-><c- p>)</c-></code> is expression-equivalent to <code class="highlight"><c- n>get_completion_signatures</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>no_env</c-><c- p>{})</c-></code> and <code class="highlight"><c- n>get_completion_signatures</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> is expression-equivalent to:</p>
     <ol>
      <li data-md>
       <p><code class="highlight"><c- n>tag_invoke_result_t</c-><c- o>&lt;</c-><c- n>get_completion_signatures_t</c-><c- p>,</c-> <c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-><c- p>{}</c-></code> if that expression is well-formed,</p>
       <ins>
        <ul>
         <li data-md>
          <p><i>Mandates:</i> <code class="highlight"><i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>completion_signatures</c-><c- o>></c-></code> or <code class="highlight"><i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>dependent_completion_signatures</c-><c- o>></c-></code>, where <code class="highlight"><c- n>Sigs</c-></code> names the type <code class="highlight"><c- n>tag_invoke_result_t</c-><c- o>&lt;</c-><c- n>get_completion_signatures_t</c-><c- p>,</c-> <c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code>.</p>
        </ul>
       </ins>
      <li data-md>
       <p>
        Otherwise, if <code class="highlight"><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>S</c-><c- o>>::</c-><c- n>completion_signatures</c-></code> is well-formed
and names a type, then a 
        <ins>value-initialized</ins>
         prvalue of 
        <ins>type</ins>
         <code class="highlight"><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>S</c-><c- o>>::</c-><c- n>completion_signatures</c-></code>,
       </p>
       <ins>
        <ul>
         <li data-md>
          <p><i>Mandates:</i> <code class="highlight"><i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>completion_signatures</c-><c- o>></c-></code> or <code class="highlight"><i><c- n>is</c-><c- o>-</c-><c- n>instance</c-><c- o>-</c-><c- n>of</c-></i><c- o>&lt;</c-><c- n>Sigs</c-><c- p>,</c-> <c- n>dependent_completion_signatures</c-><c- o>></c-></code>, where <code class="highlight"><c- n>Sigs</c-></code> names the type <code class="highlight"><c- n>remove_cvref_t</c-><c- o>&lt;</c-><c- n>S</c-><c- o>>::</c-><c- n>completion_signatures</c-></code>.</p>
        </ul>
       </ins>
      <li data-md>
       <p>Otherwise, [...]</p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="6.7" id="dependent_completion_signatures"><span class="secno">6.7. </span><span class="content"><code class="highlight"><c- n>dependent_completion_signatures</c-></code></span><a class="self-link" href="#dependent_completion_signatures"></a></h3>
   <p>Change [exec.depsndtraits] as follows:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c->  <ins><c- c1>// arguments are not associated entities ([lib.tmpl-heads])</c-></ins>
  <c- k>struct</c-> <c- nc>dependent_completion_signatures</c-><ins> <c- p>{}</c-></ins><c- p>;</c->
</pre>
   <ol>
    <li data-md>
     <p>
      <code class="highlight"><c- n>dependent_completion_signatures</c-></code> is a placeholder completion signatures
descriptor that can be 
      <del>used</del>
      <ins>returned from <code class="highlight"><c- n>get_completion_signatures</c-></code></ins>
       to report
that a type might be a sender within a particular execution environment, but
it isn’t a sender in an arbitrary execution environment.
     </p>
   </ol>
   <div class="del">
    <ol start="2">
     <li data-md>
      <p>If <code class="highlight"><c- n>decay_t</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-></code> is <code class="highlight"><c- n>no_env</c-></code>, <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-></code> is equivalent to:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;></c->
  <c- k>struct</c-> <c- nc>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>no_env</c-><c- o>></c-> <c- p>{</c->
    <c- k>template</c-> <c- o>&lt;</c-><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- p>,</c-> <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- o>></c->
        <c- k>requires</c-> false
      <c- k>using</c-> <c- n>value_types</c-> <c- o>=</c-> <i><c- d>/* unspecified */</c-></i><c- p>;</c->

    <c- k>template</c-> <c- o>&lt;</c-><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-><c- o>></c->
        <c- k>requires</c-> false
      <c- k>using</c-> <c- n>error_types</c-> <c- o>=</c-> <i><c- d>/* unspecified */</c-></i><c- p>;</c->

    <c- k>static</c-> <c- k>constexpr</c-> <c- b>bool</c-> <c- n>sends_stopped</c-> <c- o>=</c-> <i><c- d>/* unspecified */</c-></i><c- p>;</c->
  <c- p>};</c->
</pre>
      <p>Otherwise, <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-></code> is an empty struct.</p>
    </ol>
   </div>
   <div class="ins">
    <ol start="2">
     <li data-md>
      <p>When used as the return type of a customization of <code class="highlight"><c- n>get_completion_signatures</c-></code>, the template argument <code class="highlight"><c- n>E</c-></code> shall be the
unqualified type of the second argument.</p>
    </ol>
   </div>
   <p></p>
   <h3 class="heading settled" data-level="6.8" id="executionconnect"><span class="secno">6.8. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-></code></span><a class="self-link" href="#executionconnect"></a></h3>
   <p>Change [exec.connect]/p2 as follows:</p>
   <ol start="2">
    <li data-md>
     <p>The name <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-></code> denotes a customization point object. For some subexpressions <code class="highlight"><c- n>s</c-></code> and <code class="highlight"><c- n>r</c-></code>, let <code class="highlight"><c- n>S</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s</c-><c- p>))</c-></code> and <code class="highlight"><c- n>R</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>r</c-><c- p>))</c-></code>, and let <code class="highlight"><c- n>S</c->'</code> and <code class="highlight"><c- n>R</c->'</code> be the decayed types of <code class="highlight"><c- n>S</c-></code> and <code class="highlight"><c- n>R</c-></code>, respectively. If <code class="highlight"><c- n>R</c-></code> does not satisfy <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>receiver</c-></code>, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> is ill-formed. Otherwise, the expression <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> is expression-equivalent to:</p>
     <ol>
      <li data-md>
       <p>
        <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>,</c-> <c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code>, if 
        <del>that expression is valid and <code class="highlight"><c- n>S</c-></code> satisfies <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>sender</c-></code></del>
        <ins>the constraints below are satisfied</ins>
        . If the function selected by <code class="highlight"><c- n>tag_invoke</c-></code> does not return an operation state for which <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>start</c-></code> starts work described by <code class="highlight"><c- n>s</c-></code>, the behavior of calling <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> is undefined.
       </p>
       <div class="ins">
        <ul>
         <li data-md>
          <p><i>Constraints:</i></p>
<pre class="highlight"><c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- o>&amp;&amp;</c->
<c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>>></c-> <c- o>&amp;&amp;</c->
<c- n>tag_invocable</c-><c- o>&lt;</c-><c- n>connect_t</c-><c- p>,</c-> <c- n>S</c-><c- p>,</c-> <c- n>R</c-><c- o>></c->
</pre>
        </ul>
       </div>
       <ul>
        <li data-md>
         <p><i>Mandates:</i> The type of the <code class="highlight"><c- n>tag_invoke</c-></code> expression above satisfies <code class="highlight"><c- n>operation_state</c-></code>.</p>
       </ul>
      <li data-md>
       <p>Otherwise, <code class="highlight"><i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-></i><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> if [...]</p>
       <p>[...]</p>
       <div class="del"> The operand of the <i>requires-clause</i> of <code class="highlight"><i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-></i></code> is equivalent to <code class="highlight"><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-></code> if <code class="highlight"><i><c- n>await</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>type</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-><c- o>-</c-><c- n>promise</c-></i><c- o>></c-></code> is <code class="highlight"><i><c- n>cv</c-></i> <c- b>void</c-></code>; otherwise, it is <code class="highlight"><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <i><c- n>await</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>type</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-><c- o>-</c-><c- n>promise</c-></i><c- o>>></c-></code>.</div>
       <div class="ins">
         Let <code class="highlight"><c- n>Res</c-></code> be <code class="highlight"><i><c- n>await</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>type</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-><c- o>-</c-><c- n>promise</c-></i><c- o>></c-></code>, and let <code class="highlight"><c- n>Vs</c-><c- p>...</c-></code> be an empty parameter pack if <code class="highlight"><c- n>Res</c-></code> is <code class="highlight"><i><c- n>cv</c-></i> <c- b>void</c-></code>, or a pack containing the single type <code class="highlight"><c- n>Res</c-></code> otherwise. The operand of the <i>requires-clause</i> of <code class="highlight"><i><c- n>connect</c-><c- o>-</c-><c- n>awaitable</c-></i></code> is equivalent to <code class="highlight"><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>Sigs</c-><c- o>></c-></code> where <code class="highlight"><c- n>Sigs</c-></code> names the type: 
<pre class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c->
  <c- n>set_value_t</c-><c- p>(</c-><c- n>Vs</c-><c- p>...),</c->
  <c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>),</c->
  <c- n>set_stopped_t</c-><c- p>()</c-><c- o>></c->
</pre>
       </div>
      <li data-md>
       <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code> is ill-formed.</p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="6.9" id="executionjust"><span class="secno">6.9. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just</c-></code></span><a class="self-link" href="#executionjust"></a></h3>
   <p>Change [exec.just] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just</c-></code> is used to create a sender that propagates a set of values to a connected receiver.</p>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Ts</c-><c- o>></c->
<c- k>struct</c-> <i><c- nc>just</c-><c- o>-</c-><c- n>sender</c-></i> <ins><c- p>{</c-></ins> <c- c1>// exposition only</c->
  <del><c- o>:</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>Ts</c-><c- p>...),</c-> <c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-> <c- p>{</c-></del>
  <ins><c- k>using</c-> <c- n>completion_signatures</c-> <c- o>=</c-></ins>
    <ins><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>Ts</c-><c- p>...)</c-><c- o>></c-><c- p>;</c-></ins>

  <c- n>tuple</c-><c- o>&lt;</c-><c- n>Ts</c-><c- p>...</c-><c- o>></c-> <c- n>vs_</c-><c- p>;</c->

  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>R</c-><c- o>></c->
  <c- k>struct</c-> <c- nc>operation_state</c-> <c- p>{</c->
    <c- n>tuple</c-><c- o>&lt;</c-><c- n>Ts</c-><c- p>...</c-><c- o>></c-> <c- n>vs_</c-><c- p>;</c->
    <c- n>R</c-> <c- n>r_</c-><c- p>;</c->

    <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>start_t</c-><c- p>,</c-> <c- n>operation_state</c-><c- o>&amp;</c-> <c- n>s</c-><c- p>)</c-> <c- k>noexcept</c-> <c- p>{</c->
      <del><c- k>try</c-> <c- p>{</c-></del>
        <c- n>apply</c-><c- p>([</c-><c- o>&amp;</c-><c- n>s</c-><c- p>](</c-><c- n>Ts</c-><c- o>&amp;</c-><c- p>...</c-> <c- n>values_</c-><c- p>)</c-> <c- p>{</c->
          <c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>values_</c-><c- p>)...);</c->
        <c- p>},</c-> <c- n>s</c-><c- p>.</c-><c- n>vs_</c-><c- p>);</c->
      <del><c- p>}</c-></del>
      <del><c- k>catch</c-> <c- p>(...)</c-> <c- p>{</c-></del>
        <del><c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>),</c-> <c- n>current_exception</c-><c- p>());</c-></del>
      <del><c- p>}</c-></del>
    <c- p>}</c->
  <c- p>};</c->

  <c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-><ins><c- n>_of</c-><c- o>&lt;</c-><c- n>completion_signatures</c-><c- o>></c-></ins> <c- n>R</c-><c- o>></c->
    <c- k>requires</c-> <del><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>Ts</c-><c- p>...</c-><c- o>></c-> <c- o>&amp;&amp;</c-></del> <c- p>(</c-><c- n>copy_constructible</c-><c- o>&lt;</c-><c- n>Ts</c-><c- o>></c-> <c- o>&amp;&amp;</c-><c- p>...)</c->
  <c- k>friend</c-> <c- n>operation_state</c-><c- o>&lt;</c-><c- n>decay_t</c-><r><c- o>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <c- k>const</c-> <i><c- n>just</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&amp;</c-> <c- n>j</c-><c- p>,</c-> <c- n>R</c-> <c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>{</c-> <c- n>j</c-><c- p>.</c-><c- n>vs_</c-><c- p>,</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
  <c- p>}</c->

  <c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-><ins><c- n>_of</c-><c- o>&lt;</c-><c- n>completion_signatures</c-><c- o>></c-></ins> <c- n>R</c-><c- o>></c->
    <del><c- k>requires</c-> <c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>Ts</c-><c- p>...</c-><c- o>></c-></del>
  <c- k>friend</c-> <c- n>operation_state</c-><c- o>&lt;</c-><c- n>decay_t</c-><r><c- o>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <i><c- n>just</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&amp;&amp;</c-> <c- n>j</c-><c- p>,</c-> <c- n>R</c-> <c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>{</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>j</c-><c- p>.</c-><c- n>vs_</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
  <c- p>}</c->
<c- p>};</c->

<c- k>template</c-><c- o>&lt;</c-><i><c- n>movable</c-><c- o>-</c-><c- n>value</c-></i><c- p>...</c-> <c- n>Ts</c-><c- o>></c->
  <i><c- n>just</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>Ts</c-><c- o>></c-><c- p>...</c-><c- o>></c-> <c- n>just</c-><c- p>(</c-><c- n>Ts</c-> <c- o>&amp;&amp;</c-><c- p>...</c-> <c- n>ts</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>(</c-><i><c- n>see</c-><c- o>-</c-><c- n>below</c-></i><c- p>);</c->
</r></r></pre>
    <li data-md>
     <p><i>Effects</i>: [...]</p>
   </ol>
   <h3 class="heading settled" data-level="6.10" id="executionjust_error"><span class="secno">6.10. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_error</c-></code></span><a class="self-link" href="#executionjust_error"></a></h3>
   <p>Change [exec.just_error] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_error</c-></code> is used to create a sender that propagates an error to a connected receiver.</p>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>T</c-><c- o>></c->
<c- k>struct</c-> <i><c- nc>just</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>sender</c-></i> <ins><c- p>{</c-></ins> <c- c1>// exposition only</c->
  <del><c- o>:</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>T</c-><c- p>)</c-><c- o>></c-> <c- p>{</c-></del>
  <ins><c- k>using</c-> <c- n>completion_signatures</c-> <c- o>=</c-></ins>
  <ins>  <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>T</c-><c- p>)</c-><c- o>></c-><c- p>;</c-></ins>

  <c- n>T</c-> <c- n>err_</c-><c- p>;</c->

  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>R</c-><c- o>></c->
  <c- k>struct</c-> <c- nc>operation_state</c-> <c- p>{</c->
    <c- n>T</c-> <c- n>err_</c-><c- p>;</c->
    <c- n>R</c-> <c- n>r_</c-><c- p>;</c->

    <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>start_t</c-><c- p>,</c-> <c- n>operation_state</c-><c- o>&amp;</c-> <c- n>s</c-><c- p>)</c-> <c- k>noexcept</c-> <c- p>{</c->
      <c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>err_</c-><c- p>));</c->
    <c- p>}</c->
  <c- p>};</c->

  <c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-><ins><c- n>_of</c-><c- o>&lt;</c-><c- n>completion_signatures</c-><c- o>></c-></ins> <c- n>R</c-><c- o>></c->
    <c- k>requires</c-> <del><c- n>receiver</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>T</c-><c- o>></c-> <c- o>&amp;&amp;</c-></del> <c- n>copy_constructible</c-><c- o>&lt;</c-><c- n>T</c-><c- o>></c->
  <c- k>friend</c-> <c- n>operation_state</c-><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <c- k>const</c-> <i><c- n>just</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&amp;</c-> <c- n>j</c-><c- p>,</c-> <c- n>R</c-><c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>{</c-> <c- n>j</c-><c- p>.</c-><c- n>err_</c-><c- p>,</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
  <c- p>}</c->

  <c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-><ins><c- n>_of</c-><c- o>&lt;</c-><c- n>completion_signatures</c-><c- o>></c-></ins> <c- n>R</c-><c- o>></c->
    <del><c- k>requires</c-> <c- n>receiver</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <c- n>T</c-><c- o>></c-></del>
  <c- k>friend</c-> <c- n>operation_state</c-><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <i><c- n>just</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&amp;&amp;</c-> <c- n>j</c-><c- p>,</c-> <c- n>R</c-><c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>{</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>j</c-><c- p>.</c-><c- n>err_</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
  <c- p>}</c->
<c- p>};</c->

<c- k>template</c-><c- o>&lt;</c-><i><c- n>movable</c-><c- o>-</c-><c- n>value</c-></i> <c- n>T</c-><c- o>></c->
  <i><c- n>just</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>T</c-><c- o>>></c-> <c- n>just_error</c-><c- p>(</c-><c- n>T</c-><c- o>&amp;&amp;</c-> <c- n>t</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>(</c-><i><c- n>see</c-><c- o>-</c-><c- n>below</c-></i><c- p>);</c->
</pre>
    <li data-md>
     <p><i>Effects</i>: [...]</p>
   </ol>
   <h3 class="heading settled" data-level="6.11" id="executionjust_stopped"><span class="secno">6.11. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_stopped</c-></code></span><a class="self-link" href="#executionjust_stopped"></a></h3>
   <p>Change [exec.just_stopped] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>just_stopped</c-></code> is used to create a sender that propagates a stopped signal to a connected receiver.</p>
<pre class="highlight"><c- k>struct</c-> <i><c- nc>just</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>sender</c-></i> <ins><c- p>{</c-></ins> <c- c1>// exposition only</c->
  <del><c- o>:</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>></c-> <c- p>{</c-></del>
  <ins><c- k>using</c-> <c- n>completion_signatures</c-> <c- o>=</c-></ins>
  <ins>  <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>></c-><c- p>;</c-></ins>

  <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>R</c-><c- o>></c->
  <c- k>struct</c-> <c- nc>operation_state</c-> <c- p>{</c->
    <c- n>R</c-> <c- n>r_</c-><c- p>;</c->

    <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>start_t</c-><c- p>,</c-> <c- n>operation_state</c-><c- o>&amp;</c-> <c- n>s</c-><c- p>)</c-> <c- k>noexcept</c-> <c- p>{</c->
      <c- n>set_stopped</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>));</c->
    <c- p>}</c->
  <c- p>};</c->

  <c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-><ins><c- n>_of</c-><c- o>&lt;</c-><c- n>completion_signatures</c-><c- o>></c-></ins> <c- n>R</c-><c- o>></c->
  <c- k>friend</c-> <c- n>operation_state</c-><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <c- k>const</c-> <i><c- n>just</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>sender</c-></i><c- o>&amp;</c-> <c- n>j</c-><c- p>,</c-> <c- n>R</c-><c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- k>noexcept</c-> <c- p>{</c->
    <c- k>return</c-> <c- p>{</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
  <c- p>}</c->
<c- p>};</c->

<i><c- n>just</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>sender</c-></i> <c- n>just_stopped</c-><c- p>()</c-> <c- k>noexcept</c-><c- p>;</c->
</pre>
    <li data-md>
     <p><i>Effects</i>: Equivalent to <code class="highlight"><i><c- n>just</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>sender</c-></i><c- p>{}</c-></code>.</p>
   </ol>
   <h3 class="heading settled" data-level="6.12" id="executionread"><span class="secno">6.12. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>read</c-></code></span><a class="self-link" href="#executionread"></a></h3>
   <p>Change [exec.read]/p3 as follows:</p>
   <ol start="3">
    <li data-md>
     <p><code class="highlight"><i><c- n>read</c-><c- o>-</c-><c- n>sender</c-></i></code> is an exposition only class template equivalent to:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Tag</c-><c- o>></c->
  <c- k>struct</c-> <i><c- nc>read</c-><c- o>-</c-><c- n>sender</c-></i> <c- p>{</c-> <c- c1>// exposition only</c->
    <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>R</c-><c- o>></c->
      <c- k>struct</c-> <i><c- nc>operation</c-><c- o>-</c-><c- n>state</c-></i> <c- p>{</c-> <c- c1>// exposition only</c->
        <c- n>R</c-> <c- n>r_</c-><c- p>;</c->

        <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>start_t</c-><c- p>,</c-> <i><c- n>operation</c-><c- o>-</c-><c- n>state</c-></i><c- o>&amp;</c-> <c- n>s</c-><c- p>)</c-> <c- k>noexcept</c-> <c- k>try</c-> <c- p>{</c->
          <c- k>auto</c-> <c- n>value</c-> <c- o>=</c-> <c- n>Tag</c-><c- p>{}(</c-><c- n>get_env</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>));</c->
          <c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>value</c-><c- p>));</c->
        <c- p>}</c-> <c- k>catch</c-><c- p>(...)</c-> <c- p>{</c->
          <c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>s</c-><c- p>.</c-><c- n>r_</c-><c- p>),</c-> <c- n>current_exception</c-><c- p>());</c->
        <c- p>}</c->
      <c- p>};</c->

    <ins><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Env</c-><c- o>></c-></ins>
        <ins><c- k>requires</c-> <i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-></ins>
      <ins><c- k>using</c-> <i><c- n>completions</c-></i> <c- o>=</c-> <c- c1>// exposition only</c-></ins>
        <ins><c- n>completion_signatures</c-><c- o>&lt;</c-></ins>
          <ins><c- n>set_value_t</c-><c- p>(</c-><i><c- n>call</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-><c- p>),</c-> <c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-><c- p>;</c-></ins>

    <del><c- k>template</c-><c- o>&lt;</c-><c- n>receiver</c-> <c- n>R</c-><c- o>></c-></del>
      <del><c- k>requires</c-> <i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- o>&amp;&amp;</c-></del>
        <del><c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <i><c- n>call</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>>></c-></del>
    <ins><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>R</c-><c- o>></c-></ins>
      <ins><c- k>requires</c-> <c- n>receiver_of</c-><c- o>&lt;</c-><c- n>R</c-><c- p>,</c-> <i><c- n>completions</c-></i><c- o>&lt;</c-><c- n>env_of_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>>></c-></ins>
    <c- k>friend</c-> <i><c- n>operation</c-><c- o>-</c-><c- n>state</c-></i><c- o>&lt;</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>R</c-><c- o>>></c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>connect_t</c-><c- p>,</c-> <i><c- n>read</c-><c- o>-</c-><c- n>sender</c-></i><c- p>,</c-> <c- n>R</c-> <c- o>&amp;&amp;</c-> <c- n>r</c-><c- p>)</c-> <c- p>{</c->
      <c- k>return</c-> <c- p>{</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>(</c-><c- n>r</c-><c- p>)</c-> <c- p>};</c->
    <c- p>}</c->

    <del><c- k>friend</c-> <i><c- n>empty</c-><c- o>-</c-><c- n>env</c-></i> <c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures_t</c-><c- p>,</c-> <i><c- n>read</c-><c- o>-</c-><c- n>sender</c-></i><c- p>,</c-> <c- k>auto</c-><c- p>);</c-></del>
    <ins><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>Env</c-><c- o>></c-></ins>
      <ins><c- k>friend</c-> <c- k>auto</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures_t</c-><c- p>,</c-> <i><c- n>read</c-><c- o>-</c-><c- n>sender</c-></i><c- p>,</c-> <c- n>Env</c-><c- p>)</c-></ins>
        <ins><c- o>-></c-> <c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-><c- p>;</c-></ins>

    <c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>Env</c-><c- o>></c->
      <del><c- k>requires</c-> <c- p>(</c-><c- o>!</c-><c- n>same_as</c-><c- o>&lt;</c-><c- n>Env</c-><c- p>,</c-> <c- n>no_env</c-><c- o>></c-><c- p>)</c-> <c- o>&amp;&amp;</c-> <i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-></del>
      <c- k>friend</c-> <c- k>auto</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures_t</c-><c- p>,</c-> <i><c- n>read</c-><c- o>-</c-><c- n>sender</c-></i><c- p>,</c-> <c- n>Env</c-><c- p>)</c->
        <del><c- o>-></c-> <c- n>completion_signatures</c-><c- o>&lt;</c-></del>
            <del><c- n>set_value_t</c-><c- p>(</c-><i><c- n>call</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-><c- p>),</c-> <c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-><c- p>;</c-></del>
        <ins><c- o>-></c-> <i><c- n>completions</c-></i><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-> <c- k>requires</c-> true<c- p>;</c-></ins>
  <c- p>};</c->
</pre>
   </ol>
   <h3 class="heading settled" data-level="6.13" id="executionschedule_from"><span class="secno">6.13. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>schedule_from</c-></code></span><a class="self-link" href="#executionschedule_from"></a></h3>
   <p>Replace [exec.schedule_from]/3.3, which begins with "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="3">
     <li data-md>
      <p>Given subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code>, where <code class="highlight"><c- n>s2</c-></code> is a sender returned from <code class="highlight"><c- n>schedule_from</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. Then the type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c->
  <c- n>E</c-><c- p>,</c->
  <c- n>make_completion_signatures</c-><c- o>&lt;</c->
    <c- n>schedule_result_t</c-><c- o>&lt;</c-><c- n>Sch</c-><c- o>></c-><c- p>,</c->
    <c- n>E</c-><c- p>,</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-><c- p>,</c->
    <i><c- n>no</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>completions</c-></i><c- o>>></c-><c- p>;</c->
</pre>
      <p>where <code class="highlight"><i><c- n>no</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>completions</c-></i><c- o>&lt;</c-><c- n>As</c-><c- p>...</c-><c- o>></c-></code> names the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> for any set of types <code class="highlight"><c- n>As</c-><c- p>...</c-></code>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.14" id="executionthen"><span class="secno">6.14. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>then</c-></code></span><a class="self-link" href="#executionthen"></a></h3>
   <p>Replace [exec.then]/p2.3.3, which begins with "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="3">
     <li data-md>
      <p>Let <code class="highlight"><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Args</c-><c- p>...</c-><c- o>></c-></code> name the type <code class="highlight"><c- n>Tag</c-><c- p>()</c-></code> if <code class="highlight"><c- n>Args</c-><c- p>...</c-></code> is a template paramter pack containing the
single type <code class="highlight"><c- b>void</c-></code>; otherwise, <code class="highlight"><c- n>Tag</c-><c- p>(</c-><c- n>Args</c-><c- p>...)</c-></code>. Given
subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned from <code class="highlight"><c- n>then</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i><c- p>,</c->
    <i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>completions</c-></i><c- o>></c-><c- p>;</c->
</pre>
      <p>where <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>completions</c-></i></code> is an alias for:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
  <i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>completions</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>,</c-> <c- n>invoke_result_t</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-> <c- n>As</c-><c- p>...</c-><c- o>>>></c->
</pre>
      <p>and <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i></code> is an alias for <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-></code> if any of the types
in the <code class="highlight"><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i></code> named by <code class="highlight"><c- n>value_types_of_t</c-><c- o>&lt;</c-><c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i><c- p>,</c-> <i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- o>></c-></code> are <code class="highlight"><c- n>true_type</c-></code>; otherwise, <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code>, where <code class="highlight"><i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i></code> is the template alias:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
  <i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i> <c- o>=</c->
    <c- n>bool_constant</c-><c- o>&lt;</c-><c- n>is_nothrow_invocable_v</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-> <c- n>As</c-><c- p>...</c-><c- o>>></c-><c- p>;</c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.15" id="executionupon_error"><span class="secno">6.15. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>upon_error</c-></code></span><a class="self-link" href="#executionupon_error"></a></h3>
   <p>Replace [exec.upon_error]/p2.3.3, which begins with "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="3">
     <li data-md>
      <p>Let <code class="highlight"><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Args</c-><c- p>...</c-><c- o>></c-></code> name the type <code class="highlight"><c- n>Tag</c-><c- p>()</c-></code> if <code class="highlight"><c- n>Args</c-><c- p>...</c-></code> is a template paramter pack containing the
single type <code class="highlight"><c- b>void</c-></code>; otherwise, <code class="highlight"><c- n>Tag</c-><c- p>(</c-><c- n>Args</c-><c- p>...)</c-></code>. Given
subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned from <code class="highlight"><c- n>upon_error</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i><c- p>,</c->
    <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i><c- p>,</c-> <i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>completion</c-></i><c- o>></c-><c- p>;</c->
</pre>
      <p>where <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>completion</c-></i></code> is the template alias:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>completion</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>,</c-> <c- n>invoke_result_t</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-> <c- n>E</c-><c- o>>>></c->
</pre>
      <p>and <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i></code> is an alias for <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-></code> if any of the types
in the <code class="highlight"><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i></code> named by <code class="highlight"><c- n>error_types_of_t</c-><c- o>&lt;</c-><c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i><c- o>></c-></code> are <code class="highlight"><c- n>true_type</c-></code>; otherwise, <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code>, where <code class="highlight"><i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i></code> is the template alias:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Es</c-><c- o>></c->
  <i><c- n>potentially</c-><c- o>-</c-><c- n>throwing</c-></i> <c- o>=</c->
    <i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- o>&lt;</c-><c- n>bool_constant</c-><c- o>&lt;</c-><c- n>is_nothrow_invocable_v</c-><c- o>&lt;</c-><c- n>F</c-><c- p>,</c-> <c- n>Es</c-><c- o>>></c-><c- p>...</c-><c- o>></c-><c- p>;</c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.16" id="executionupon_stopped"><span class="secno">6.16. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>upon_stopped</c-></code></span><a class="self-link" href="#executionupon_stopped"></a></h3>
   <p>Replace [exec.upon_stopped]/p2.3.3, which begins "Given some expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="3">
     <li data-md>
      <p>Let <code class="highlight"><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>Args</c-><c- p>...</c-><c- o>></c-></code> name the type <code class="highlight"><c- n>Tag</c-><c- p>()</c-></code> if <code class="highlight"><c- n>Args</c-><c- p>...</c-></code> is a template paramter pack containing the
single type <code class="highlight"><c- b>void</c-></code>; otherwise, <code class="highlight"><c- n>Tag</c-><c- p>(</c-><c- n>Args</c-><c- p>...)</c-></code>. Given
subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned from <code class="highlight"><c- n>upon_stopped</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i><c- p>,</c->
    <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i><c- p>,</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></i><c- p>,</c-> <i><c- n>set</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>completions</c-></i><c- o>></c-><c- p>;</c->
</pre>
      <p>where <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>stopped</c-><c- o>-</c-><c- n>completions</c-></i></code> names the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><i><c- n>compl</c-><c- o>-</c-><c- n>sig</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>,</c-> <c- n>invoke_result_t</c-><c- o>&lt;</c-><c- n>F</c-><c- o>>></c-></code>, and <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>error</c-><c- o>-</c-><c- n>signature</c-></i></code> names the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-></code> if <code class="highlight"><c- n>is_nothrow_invocable_v</c-><c- o>&lt;</c-><c- n>F</c-><c- o>></c-></code> is <code class="highlight">true</code>, or <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> otherwise.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.17" id="executionbulk"><span class="secno">6.17. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>bulk</c-></code></span><a class="self-link" href="#executionbulk"></a></h3>
   <p>Replace [exec.bulk]/p2.4, which begins, "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="4">
     <li data-md>
      <p>Given subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned
from <code class="highlight"><c- n>bulk</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>>></c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.18" id="executionsplit"><span class="secno">6.18. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>split</c-></code></span><a class="self-link" href="#executionsplit"></a></h3>
   <p>Replace [exec.split]/p3.4, which begins, "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="4">
     <li data-md>
      <p>Given subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned
from <code class="highlight"><c- n>split</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-><c- p>,</c->
    <i><c- n>value</c-><c- o>-</c-><c- n>signatures</c-></i><c- p>,</c-> <i><c- n>error</c-><c- o>-</c-><c- n>signatures</c-></i><c- o>></c-><c- p>;</c->
</pre>
      <p>where <code class="highlight"><i><c- n>value</c-><c- o>-</c-><c- n>signatures</c-></i></code> is the alias template:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Ts</c-><c- o>></c->
  <c- k>using</c-> <i><c- n>value</c-><c- o>-</c-><c- n>signatures</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>Ts</c-><c- o>>&amp;</c-><c- p>...)</c-><c- o>></c-><c- p>;</c->
</pre>
      <p>and <code class="highlight"><i><c- n>error</c-><c- o>-</c-><c- n>signatures</c-></i></code> is the alias template:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <c- k>using</c-> <i><c- n>error</c-><c- o>-</c-><c- n>signatures</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>E</c-><c- o>>&amp;</c-><c- p>)</c-><c- o>></c-><c- p>;</c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.19" id="executionwhen_all"><span class="secno">6.19. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>when_all</c-></code></span><a class="self-link" href="#executionwhen_all"></a></h3>
   <p>Replace [exec.when_all]/p2.2.5, which begins, "Given some expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="5">
     <li data-md>
      <p>Given subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned
from <code class="highlight"><c- n>when_all</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>, and let <code class="highlight"><c- n>Ss</c-><c- p>...</c-></code> be the decayed types of the
arguments to the <code class="highlight"><c- n>when_all</c-></code> expression that created <code class="highlight"><c- n>s2</c-></code>. If the
decayed type of <code class="highlight"><c- n>e</c-></code> is <code class="highlight"><c- n>no_env</c-></code>, let <code class="highlight"><c- n>WE</c-></code> be <code class="highlight"><c- n>no_env</c-></code>; otherwise,
let <code class="highlight"><c- n>WE</c-></code> be a type such that <code class="highlight"><c- n>stop_token_of_t</c-><c- o>&lt;</c-><c- n>WE</c-><c- o>></c-></code> is <code class="highlight"><c- n>in_place_stop_token</c-></code> and <code class="highlight"><c- n>tag_invoke_result_t</c-><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>WE</c-><c- p>,</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-></code> names the type, if any, of <code class="highlight"><i><c- n>call</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-></code> for all types <code class="highlight"><c- n>As</c-><c- p>...</c-></code> and all types <code class="highlight"><c- n>Tag</c-></code> besides <code class="highlight"><c- n>get_stop_token_t</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be as follows:</p>
      <ol>
       <li data-md>
        <p>For each type <code class="highlight"><c- n>S</c-><i><sub><c- n>i</c-></sub></i></code> in <code class="highlight"><c- n>Ss</c-><c- p>...</c-></code>, let <code class="highlight"><c- n>S</c->'<i><sub><c- n>i</c-></sub></i></code> name the type <code class="highlight"><c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><i><sub><c- n>i</c-></sub></i><c- o>></c-></code>. If for
any type <code class="highlight"><c- n>S</c->'<i><sub><c- n>i</c-></sub></i></code>, the type <code class="highlight"><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c->'<i><sub><c- n>i</c-></sub></i><c- p>,</c-> <c- n>WE</c-><c- o>></c-></code> names a type other than an instantiation of <code class="highlight"><c- n>completion_signatures</c-></code>, the type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-></code>.</p>
       <li data-md>
        <p>Otherwise, for each type <code class="highlight"><c- n>S</c->'<i><sub><c- n>i</c-></sub></i></code>, let <code class="highlight"><c- n>Sigs</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> be the set of template
arguments in the instantiation of <code class="highlight"><c- n>completion_signatures</c-></code> named
by <code class="highlight"><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c->'<i><sub><c- n>i</c-></sub></i><c- p>,</c-> <c- n>WE</c-><c- o>></c-></code>, and let <code class="highlight"><c- n>C</c-><i><sub><c- n>i</c-></sub></i></code> be the
count of function types in <code class="highlight"><c- n>Sigs</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> for which the return
type is <code class="highlight"><c- n>set_value_t</c-></code>. If any <code class="highlight"><c- n>C</c-><i><sub><c- n>i</c-></sub></i></code> is two or greater, then the
type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-></code>.</p>
       <li data-md>
        <p>Otherwise, let <code class="highlight"><c- n>Sigs2</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> be the set of
function types in <code class="highlight"><c- n>Sigs</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> whose
return types are <i>not</i> <code class="highlight"><c- n>set_value_t</c-></code>, and let <code class="highlight"><c- n>Ws</c-><c- p>...</c-></code> be
the unique set of types in <code class="highlight"><c- p>[</c-><c- n>Sigs2</c-><i><sub><c- n>0</c-></sub></i><c- p>...,</c-> <c- n>Sigs2</c-><i><sub><c- n>1</c-></sub></i><c- p>...,</c-> <c- p>...</c-> <c- n>Sigs2</c-><i><sub><c- n>n</c-><c- mf>-1</c-></sub></i><c- mf>.</c-><c- p>..,</c-> <c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>),</c-> <c- n>set_stopped_t</c-><c- p>()]</c-></code>, where <code class="highlight"><i><c- n>n</c-></i></code> is <code class="highlight"><c- k>sizeof</c-><c- p>...(</c-><c- n>Ss</c-><c- p>)</c-></code>. If any <code class="highlight"><c- n>C</c-><i><sub><c- n>i</c-></sub></i></code> is <code class="highlight"><c- mi>0</c-></code>, then the type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Ws</c-><c- p>...</c-><c- o>></c-></code>.</p>
       <li data-md>
        <p>Otherwise, let <code class="highlight"><c- n>V</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> be the function
argument types of the single type in <code class="highlight"><c- n>Sigs</c-><i><sub><c- n>i</c-></sub></i><c- p>...</c-></code> for which the return type is <code class="highlight"><c- n>set_value_t</c-></code>. Then the type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Ws</c-><c- p>...,</c-> <c- n>set_value_t</c-><c- p>(</c-><c- n>V</c-><i><sub><c- n>0</c-></sub></i><c- p>...,</c-> <c- n>V</c-><i><sub><c- n>1</c-></sub></i><c- p>...,</c-> <c- p>...</c-> <c- n>V</c-><i><sub><c- n>n</c-><c- mf>-1</c-></sub></i><c- mf>.</c-><c- p>..)</c-><c- o>></c-></code>.</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.20" id="executionensure_started"><span class="secno">6.20. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>ensure_started</c-></code></span><a class="self-link" href="#executionensure_started"></a></h3>
   <p>Replace [exec.ensure_started]/p2.4 which begins, "Given an expression <code class="highlight"><c- n>e</c-></code>, let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>," with the following:</p>
   <div class="ins">
    <ol start="4">
     <li data-md>
      <p>Given subexpressions <code class="highlight"><c- n>s2</c-></code> and <code class="highlight"><c- n>e</c-></code> where <code class="highlight"><c- n>s2</c-></code> is a sender returned
from <code class="highlight"><c- n>ensure_started</c-></code> or a copy of such, let <code class="highlight"><c- n>S2</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>s2</c-><c- p>))</c-></code> and let <code class="highlight"><c- n>E</c-></code> be <code class="highlight"><c- k>decltype</c-><c- p>((</c-><c- n>e</c-><c- p>))</c-></code>. The type of <code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>get_completion_signatures</c-><c- p>,</c-> <c- n>s2</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> shall be equivalent
to:</p>
<pre class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c->
  <c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>S2</c-><c- p>,</c-> <c- n>S</c-><c- o>></c-><c- p>,</c->
  <i><c- n>ensure</c-><c- o>-</c-><c- n>started</c-><c- o>-</c-><c- n>env</c-></i><c- p>,</c->
  <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- o>&amp;&amp;</c-><c- p>)</c-><c- o>></c-><c- p>,</c->
  <i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>signature</c-></i><c- p>,</c->
  <i><c- n>error</c-><c- o>-</c-><c- n>types</c-></i><c- o>></c->
</pre>
      <p>where <code class="highlight"><i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>signature</c-></i></code> is the alias template:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Ts</c-><c- o>></c->
  <c- k>using</c-> <i><c- n>set</c-><c- o>-</c-><c- n>value</c-><c- o>-</c-><c- n>signature</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>Ts</c-><c- o>>&amp;&amp;</c-><c- p>...)</c-><c- o>></c-><c- p>;</c->
</pre>
      <p>and <code class="highlight"><i><c- n>error</c-><c- o>-</c-><c- n>types</c-></i></code> is the alias template:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <c- k>using</c-> <i><c- n>error</c-><c- o>-</c-><c- n>types</c-></i> <c- o>=</c->
    <c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>decay_t</c-><c- o>&lt;</c-><c- n>E</c-><c- o>>&amp;&amp;</c-><c- p>)</c-><c- o>></c-><c- p>;</c->
</pre>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.21" id="executionstart_detached"><span class="secno">6.21. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>start_detached</c-></code></span><a class="self-link" href="#executionstart_detached"></a></h3>
   <p>Change [exec.start_detached]p2.3 as follows:</p>
   <ol start="3">
    <li data-md>
     <p>Otherwise:</p>
     <ol>
      <li data-md>
       <del>Constructs a receiver <code class="highlight"><c- n>r</c-></code></del>
       <ins>Let <code class="highlight"><c- n>R</c-></code> be the type of a receiver, let <code class="highlight"><c- n>r</c-></code> be an rvalue of type <code class="highlight"><c- n>R</c-></code>, and let <code class="highlight"><c- n>cr</c-></code> be a
lvalue reference to <code class="highlight"><c- k>const</c-> <c- n>R</c-></code> such that</ins>
       : 
       <ol>
        <li data-md>
         <del>When <code class="highlight"><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>ts</c-><c- p>...)</c-></code> is called, it does nothing.</del>
         <ins>The expression <code class="highlight"><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is not potentially throwing and has no effect,</ins>
        <li data-md>
         <del>When <code class="highlight"><c- n>set_error</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> is called, it calls <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>terminate</c-></code>.</del>
         <ins>For any subexpression <code class="highlight"><c- n>e</c-></code>, the expression <code class="highlight"><c- n>set_error</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>e</c-><c- p>)</c-></code> is expression-equivalent
to <code class="highlight"><c- n>terminate</c-><c- p>()</c-></code>,</ins>
        <li data-md>
         <del>When <code class="highlight"><c- n>set_stopped</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is called, it does nothing.</del>
         <ins>The expression <code class="highlight"><c- n>set_stopped</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is not potentially throwing and has no effect, and</ins>
       </ol>
       <ins>
        <ol start="4">
         <li data-md>
          <p>The expression <code class="highlight"><c- n>get_env</c-><c- p>(</c-><c- n>cr</c-><c- p>)</c-></code> is expression-equivalent to <code class="highlight"><i><c- n>empty</c-><c- o>-</c-><c- n>env</c-></i><c- p>{}</c-></code>.</p>
        </ol>
       </ins>
      <li data-md>
       <p>Calls <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>connect</c-><c- p>(</c-><c- n>s</c-><c- p>,</c-> <c- n>r</c-><c- p>)</c-></code>, resulting in an operation state <code class="highlight"><c- n>op_state</c-></code>, then calls <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>start</c-><c- p>(</c-><c- n>op_state</c-><c- p>)</c-></code>. The lifetime of <code class="highlight"><c- n>op_state</c-></code> lasts until one of the receiver completion-signals of <code class="highlight"><c- n>r</c-></code> is called.</p>
     </ol>
   </ol>
   <h3 class="heading settled" data-level="6.22" id="this_threadsync_wait"><span class="secno">6.22. </span><span class="content"><code class="highlight"><c- n>this_thread</c-><c- o>::</c-><c- n>sync_wait</c-></code></span><a class="self-link" href="#this_threadsync_wait"></a></h3>
   <p>Change [exec.sync_wait]/p4.3.3.1 as follows:</p>
   <ol>
    <li data-md>
     <p>
      If <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>ts</c-><c- p>...)</c-></code> has been called, returns <code class="highlight"><i><c- n>sync</c-><c- o>-</c-><c- n>wait</c-><c- o>-</c-><c- n>type</c-></i><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <i><c- n>sync</c-><c- o>-</c-><c- n>wait</c-><c- o>-</c-><c- n>env</c-></i><c- o>></c-><c- p>{</c-><i><c- n>decayed</c-><c- o>-</c-><c- n>tuple</c-></i><c- o>&lt;</c-><c- k>decltype</c-><c- p>(</c-><c- n>ts</c-><c- p>)...</c-><c- o>></c-><c- p>{</c-><c- n>ts</c-><c- p>...}}</c-></code>. 
      <ins>If that expression exits exceptionally, the exception is propagated to the caller of <code class="highlight"><c- n>sync_wait</c-></code>.</ins>
     </p>
   </ol>
   <h3 class="heading settled" data-level="6.23" id="executionreceiver_adaptor"><span class="secno">6.23. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>receiver_adaptor</c-></code></span><a class="self-link" href="#executionreceiver_adaptor"></a></h3>
   <p>Remove [exec.utils.rcvr_adptr]/p2, which begins, "This section makes use of the following exposition-only entities," and renumber all subsequent paragraphs.</p>
   <p>Change [exec.utils.rcvr_adptr]/p4-6 (now p3-5) as follows:</p>
   <ol start="3">
    <li data-md>
     <p><code class="highlight"><c- n>receiver_adaptor</c-><c- o>&lt;</c-><c- n>Derived</c-><c- p>,</c-> <c- n>Base</c-><c- o>></c-></code> is equivalent to the following:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c->
  <i><c- k>class</c-><c- o>-</c-><c- n>type</c-></i> <c- n>Derived</c-><c- p>,</c->
  <c- n>receiver</c-> <c- n>Base</c-> <c- o>=</c-> <i><c- n>unspecified</c-></i><c- o>></c-> <c- c1>// arguments are not associated entities ([lib.tmpl-heads])</c->
<c- k>class</c-> <c- nc>receiver_adaptor</c-> <c- p>{</c->
  <c- k>friend</c-> <c- n>Derived</c-><c- p>;</c->
 <c- k>public</c-><c- o>:</c->
  <c- c1>// Constructors</c->
  <c- n>receiver_adaptor</c-><c- p>()</c-> <c- o>=</c-> <c- k>default</c-><c- p>;</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>B</c-><c- o>></c->
      <c- k>requires</c-> <i><c- n>HAS</c-><c- o>-</c-><c- n>BASE</c-></i> <c- o>&amp;&amp;</c-> <c- n>constructible_from</c-><c- o>&lt;</c-><c- n>Base</c-><c- p>,</c-> <c- n>B</c-><c- o>></c->
    <c- k>explicit</c-> <c- n>receiver_adaptor</c-><c- p>(</c-><c- n>B</c-><c- o>&amp;&amp;</c-> <c- n>base</c-><c- p>)</c-> <c- o>:</c-> <c- n>base_</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>B</c-><c- o>></c-><c- p>(</c-><c- n>base</c-><c- p>))</c-> <c- p>{}</c->

 <c- k>private</c-><c- o>:</c->
  <c- k>using</c-> <c- n>set_value</c-> <c- o>=</c-> <i><c- n>unspecified</c-></i><c- p>;</c->
  <c- k>using</c-> <c- n>set_error</c-> <c- o>=</c-> <i><c- n>unspecified</c-></i><c- p>;</c->
  <c- k>using</c-> <c- n>set_stopped</c-> <c- o>=</c-> <i><c- n>unspecified</c-></i><c- p>;</c->
  <ins><c- k>using</c-> <c- n>get_env</c-> <c- o>=</c-> <i><c- n>unspecified</c-></i><c- p>;</c-></ins>

  <c- c1>// Member functions</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Self</c-><c- o>></c->
    <c- k>requires</c-> <i><c- n>HAS</c-><c- o>-</c-><c- n>BASE</c-></i>
  <del><c- n>copy_cvref_t</c-><c- o>&lt;</c-><c- n>Self</c-><c- p>,</c-> <c- n>Base</c-><c- o>>&amp;&amp;</c-></del><ins><c- k>decltype</c-><c- p>(</c-><c- k>auto</c-><c- p>)</c-></ins> <c- n>base</c-><c- p>(</c-><c- k>this</c-> <c- n>Self</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>)</c-> <c- k>noexcept</c-> <c- p>{</c->
    <del><c- k>return</c-> <c- k>static_cast</c-><c- o>&lt;</c-><c- n>Self</c-><c- o>&amp;&amp;></c-><c- p>(</c-><c- n>self</c-><c- p>).</c-><c- n>base_</c-><c- p>;</c-></del>
    <ins><c- k>return</c-> <c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>Self</c-><c- o>></c-><c- p>(</c-><c- n>self</c-><c- p>).</c-><c- n>base_</c-><c- p>);</c-></ins>
  <c- p>}</c->

  <c- c1>// [exec.utils.rcvr_adptr.nonmembers] Non-member functions</c->
  <c- k>template</c-> <c- o>&lt;</c-><del><c- k>class</c-> <c- nc>D</c-> <c- o>=</c-> <c- n>Derived</c-><c- p>,</c-></del> <c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
    <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_value_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>,</c-> <c- n>As</c-><c- o>&amp;&amp;</c-><c- p>...</c-> <c- n>as</c-><c- p>)</c-> <c- k>noexcept</c-><del><c- p>(</c-><i><c- n>see</c-> <c- n>below</c-></i><c- p>)</c-></del><c- p>;</c->

  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><del><c- p>,</c-> <c- k>class</c-> <c- nc>D</c-> <c- o>=</c-> <c- n>Derived</c-></del><c- o>></c->
    <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_error_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>,</c-> <c- n>E</c-><c- o>&amp;&amp;</c-> <c- n>e</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>;</c->

  <del><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>D</c-> <c- o>=</c-> <c- n>Derived</c-><c- o>></c-></del>
  <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_stopped_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>;</c->
  <ins>
  <c- k>friend</c-> <c- nf>decltype</c-><c- p>(</c-><c- k>auto</c-><c- p>)</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>get_env_t</c-><c- p>,</c-> <c- k>const</c-> <c- n>Derived</c-><c- o>&amp;</c-> <c- n>self</c-><c- p>)</c->
      <c- k>noexcept</c-><c- p>(</c-><i><c- n>see</c-> <c- n>below</c-></i><c- p>);</c-></ins>

  <c- k>template</c-> <c- o>&lt;</c-><i><c- n>forwarding</c-><c- o>-</c-><c- n>receiver</c-><c- o>-</c-><c- n>query</c-></i> <c- n>Tag</c-><del><c- p>,</c-> <c- k>class</c-> <c- nc>D</c-> <c- o>=</c-> <c- n>Derived</c-></del><c- p>,</c-> <c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
      <c- k>requires</c-> <i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- k>const</c-> <c- n>D</c-><ins><c- n>erived</c-></ins><c- o>&amp;</c-><c- p>),</c-> <c- n>As</c-><c- p>...</c-><c- o>></c->
    <c- k>friend</c-> <c- k>auto</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>Tag</c-> <c- n>tag</c-><c- p>,</c-> <c- k>const</c-> <c- n>Derived</c-><c- o>&amp;</c-> <c- n>self</c-><c- p>,</c-> <c- n>As</c-><c- o>&amp;&amp;</c-><c- p>...</c-> <c- n>as</c-><c- p>)</c->
      <c- k>noexcept</c-><c- p>(</c-><i><c- n>nothrow</c-><c- o>-</c-><c- n>callable</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- k>const</c-> <c- n>D</c-><ins><c- n>erived</c-></ins><c- o>&amp;</c-><c- p>),</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-><c- p>)</c->
      <c- o>-></c-> <i><c- n>call</c-><c- o>-</c-><c- n>result</c-><c- o>-</c-><c- n>t</c-></i><c- o>&lt;</c-><c- n>Tag</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- k>const</c-> <c- n>D</c-><ins><c- n>erived</c-></ins><c- o>&amp;</c-><c- p>),</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-> <c- p>{</c->
      <c- k>return</c-> <c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>tag</c-><c- p>)(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>self</c-><c- p>),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>As</c-><c- o>></c-><c- p>(</c-><c- n>as</c-><c- p>)...);</c->
    <c- p>}</c->

  <c- p>[[</c-><c- n>no_unique_address</c-><c- p>]]</c-> <c- n>Base</c-> <c- n>base_</c-><c- p>;</c-> <c- c1>// present if and only if </c-><i><c- c1>HAS-BASE</c-></i><c- c1> is true</c->
<c- p>};</c->
</pre>
    <li data-md>
     <p>[<i>Note:</i> <code class="highlight"><c- n>receiver_adaptor</c-></code> provides <code class="highlight"><c- n>tag_invoke</c-></code> overloads on behalf of
the derived class <code class="highlight"><c- n>Derived</c-></code>, which is incomplete when <code class="highlight"><c- n>receiver_adaptor</c-></code> is
instantiated.]</p>
    <li data-md>
     <p>[<i>Example:</i></p>
<pre class="highlight"><ins><c- k>using</c-> <c- n>_int_completion</c-> <c- o>=</c-></ins>
<ins>  <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(</c-><c- b>int</c-><c- p>)</c-><c- o>></c-><c- p>;</c-></ins>

<c- k>template</c-> <c- o>&lt;</c-><c- n>execution</c-><c- o>::</c-><c- n>receiver_of</c-><c- o>&lt;</c-><del><c- n>int</c-></del><ins><c- n>_int_completion</c-></ins><c- o>></c-> <c- n>R</c-><c- o>></c->
  <c- k>class</c-> <c- nc>my_receiver</c-> <c- o>:</c-> <c- n>execution</c-><c- o>::</c-><c- n>receiver_adaptor</c-><c- o>&lt;</c-><c- n>my_receiver</c-><c- o>&lt;</c-><c- n>R</c-><c- o>></c-><c- p>,</c-> <c- n>R</c-><c- o>></c-> <c- p>{</c->
    <c- k>friend</c-> <c- n>execution</c-><c- o>::</c-><c- n>receiver_adaptor</c-><c- o>&lt;</c-><c- n>my_receiver</c-><c- p>,</c-> <c- n>R</c-><c- o>></c-><c- p>;</c->
    <c- b>void</c-> <c- nf>set_value</c-><c- p>()</c-> <c- o>&amp;&amp;</c-> <c- p>{</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- o>*</c-><c- k>this</c-><c- p>).</c-><c- n>base</c-><c- p>(),</c-> <c- mi>42</c-><c- p>);</c->
    <c- p>}</c->
   <c- k>public</c-><c- o>:</c->
    <c- k>using</c-> <c- n>execution</c-><c- o>::</c-><c- n>receiver_adaptor</c-><c- o>&lt;</c-><c- n>my_receiver</c-><c- p>,</c-> <c- n>R</c-><c- o>>::</c-><c- n>receiver_adaptor</c-><c- p>;</c->
  <c- p>};</c->
</pre>
     <p>-- <i>end example</i>]</p>
   </ol>
   <p>Replace section [exec.utils.rcvr_adptr.nonmembers] with the following:</p>
   <div class="ins">
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
  <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_value_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>,</c-> <c- n>As</c-><c- o>&amp;&amp;</c-><c- p>...</c-> <c- n>as</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>;</c->
</pre>
    <ol>
     <li data-md>
      <p>Let <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>VALUE</c-></code> be the expression <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>).</c-><c- n>set_value</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>As</c-><c- o>></c-><c- p>(</c-><c- n>as</c-><c- p>)...)</c-></code>.</p>
     <li data-md>
      <p><i>Constraints:</i> Either <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>VALUE</c-></code> is a valid expression or <code class="highlight"><c- k>typename</c-> <c- nc>Derived</c-><c- o>::</c-><c- n>set_value</c-></code> denotes a type and <code class="highlight"><i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>set_value_t</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- n>Derived</c-><c- p>),</c-> <c- n>As</c-><c- p>...</c-><c- o>></c-></code> is <code class="highlight">true</code>.</p>
     <li data-md>
      <p><i>Mandates:</i> <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>VALUE</c-></code>, if that expression is valid, is not potentially throwing.</p>
     <li data-md>
      <p><i>Effects:</i> Equivalent to:</p>
      <ul>
       <li data-md>
        <p>If <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>VALUE</c-></code> is a valid expression, <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>VALUE</c-></code>;</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>)),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>As</c-><c- o>></c-><c- p>(</c-><c- n>as</c-><c- p>)...)</c-></code>.</p>
      </ul>
    </ol>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>E</c-><c- o>></c->
  <c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_error_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>,</c-> <c- n>E</c-><c- o>&amp;&amp;</c-> <c- n>e</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>;</c->
</pre>
    <ol>
     <li data-md>
      <p>Let <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>ERROR</c-></code> be the expression <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>).</c-><c- n>set_error</c-><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-><c- p>(</c-><c- n>e</c-><c- p>))</c-></code>.</p>
     <li data-md>
      <p><i>Constraints:</i> Either <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>ERROR</c-></code> is a valid expression or <code class="highlight"><c- k>typename</c-> <c- nc>Derived</c-><c- o>::</c-><c- n>set_error</c-></code> denotes a type and <code class="highlight"><i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>set_error_t</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- n>Derived</c-><c- p>),</c-> <c- n>E</c-><c- o>></c-></code> is <code class="highlight">true</code>.</p>
     <li data-md>
      <p><i>Mandates:</i> <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>ERROR</c-></code>, if that expression is valid, is not potentially throwing.</p>
     <li data-md>
      <p><i>Effects:</i> Equivalent to:</p>
      <ul>
       <li data-md>
        <p>If <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>ERROR</c-></code> is a valid expression, <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>ERROR</c-></code>;</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error</c-><c- p>(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>)),</c-> <c- n>std</c-><c- o>::</c-><c- n>forward</c-><c- o>&lt;</c-><c- n>E</c-><c- o>></c-><c- p>(</c-><c- n>e</c-><c- p>))</c-></code>.</p>
      </ul>
    </ol>
<pre class="highlight"><c- k>friend</c-> <c- b>void</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>set_stopped_t</c-><c- p>,</c-> <c- n>Derived</c-><c- o>&amp;&amp;</c-> <c- n>self</c-><c- p>)</c-> <c- k>noexcept</c-><c- p>;</c->
</pre>
    <ol>
     <li data-md>
      <p>Let <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>STOPPED</c-></code> be the expression <code class="highlight"><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>).</c-><c- n>set_stopped</c-><c- p>()</c-></code>.</p>
     <li data-md>
      <p><i>Constraints:</i> Either <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>STOPPED</c-></code> is a valid expression or <code class="highlight"><c- k>typename</c-> <c- nc>Derived</c-><c- o>::</c-><c- n>set_stopped</c-></code> denotes a type and <code class="highlight"><i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>set_stopped_t</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- n>Derived</c-><c- p>)</c-><c- o>></c-></code> is <code class="highlight">true</code>.</p>
     <li data-md>
      <p><i>Mandates:</i> <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>STOPPED</c-></code>, if that expression is valid, is not potentially throwing.</p>
     <li data-md>
      <p><i>Effects:</i> Equivalent to:</p>
      <ul>
       <li data-md>
        <p>If <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>STOPPED</c-></code> is a valid expression, <code class="highlight"><c- n>SET</c-><c- o>-</c-><c- n>STOPPED</c-></code>;</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped</c-><c- p>(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>std</c-><c- o>::</c-><c- n>move</c-><c- p>(</c-><c- n>self</c-><c- p>)))</c-></code>.</p>
      </ul>
    </ol>
<pre class="highlight"><c- k>friend</c-> <c- nf>decltype</c-><c- p>(</c-><c- k>auto</c-><c- p>)</c-> <c- n>tag_invoke</c-><c- p>(</c-><c- n>get_env_t</c-><c- p>,</c-> <c- k>const</c-> <c- n>Derived</c-><c- o>&amp;</c-> <c- n>self</c-><c- p>)</c->
  <c- k>noexcept</c-><c- p>(</c-><i><c- n>see</c-> <c- n>below</c-></i><c- p>);</c->
</pre>
    <ol>
     <li data-md>
      <p><i>Constraints:</i> Either <code class="highlight"><c- n>self</c-><c- p>.</c-><c- n>get_env</c-><c- p>()</c-></code> is a valid expression or <code class="highlight"><c- k>typename</c-> <c- nc>Derived</c-><c- o>::</c-><c- n>get_env</c-></code> denotes a type and <code class="highlight"><i><c- n>callable</c-></i><c- o>&lt;</c-><c- n>get_env_t</c-><c- p>,</c-> <i><c- n>BASE</c-><c- o>-</c-><c- n>TYPE</c-></i><c- p>(</c-><c- k>const</c-> <c- n>Derived</c-><c- o>&amp;</c-><c- p>)</c-><c- o>></c-></code> is <code class="highlight">true</code>.</p>
     <li data-md>
      <p><i>Effects:</i> Equivalent to:</p>
      <ul>
       <li data-md>
        <p>If <code class="highlight"><c- n>self</c-><c- p>.</c-><c- n>get_env</c-><c- p>()</c-></code> is a valid expression, <code class="highlight"><c- n>self</c-><c- p>.</c-><c- n>get_env</c-><c- p>()</c-></code>;</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>get_env</c-><c- p>(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>self</c-><c- p>))</c-></code>.</p>
      </ul>
     <li data-md>
      <p><i>Remarks:</i> The expression in the <code class="highlight"><c- k>noexcept</c-></code> clause is:</p>
      <ul>
       <li data-md>
        <p>If <code class="highlight"><c- n>self</c-><c- p>.</c-><c- n>get_env</c-><c- p>()</c-></code> is a valid expression, <code class="highlight"><c- k>noexcept</c-><c- p>(</c-><c- n>self</c-><c- p>.</c-><c- n>get_env</c-><c- p>())</c-></code>;</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- k>noexcept</c-><c- p>(</c-><c- n>execution</c-><c- o>::</c-><c- n>get_env</c-><c- p>(</c-><i><c- n>GET</c-><c- o>-</c-><c- n>BASE</c-></i><c- p>(</c-><c- n>self</c-><c- p>)))</c-></code>.</p>
      </ul>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.24" id="executioncompletion_signatures"><span class="secno">6.24. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-></code></span><a class="self-link" href="#executioncompletion_signatures"></a></h3>
   <p>Change [exec.utils.cmplsigs] as follows:</p>
   <ol>
    <li data-md>
     <del><code class="highlight"><c- n>completion_signatures</c-></code> is used to define a type that implements the nested <code class="highlight"><c- n>value_types</c-></code>, <code class="highlight"><c- n>error_types</c-></code>, and <code class="highlight"><c- n>sends_stopped</c-></code> members that describe the
ways a sender completes. Its arguments are a flat list of function types
that describe the signatures of the receiver’s completion-signal operations
that the sender invokes.</del>
     <br> 
     <ins><code class="highlight"><c- n>completion_signatures</c-></code> is used to describe the completion signals of a receiver that
a sender may invoke. Its template argument list is a list of function types corresponding
to the signatures of the receiver’s completion signals.</ins>
    <li data-md>
     <p>[<i>Example:</i></p>
<pre class="highlight"><c- k>class</c-> <c- nc>my_sender</c-> <c- p>{</c->
  <c- k>using</c-> <c- n>completion_signatures</c-> <c- o>=</c->
    <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(),</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(</c-><c- b>int</c-><c- p>,</c-> <c- b>float</c-><c- p>),</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>),</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>error_code</c-><c- p>),</c->
      <c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>></c-><c- p>;</c->
<c- p>};</c->

<del><c- c1>// completion_signatures_of_t&lt;my_sender></c-></del>
<del><c- c1>//      ::value_types&lt;tuple, variant> names the type:</c-></del>
<del><c- c1>//   variant&lt;tuple&lt;>, tuple&lt;int, float>></c-></del>
<del><c- c1>//</c-></del>
<del><c- c1>// completion_signatures_of_t&lt;my_sender></c-></del>
<del><c- c1>//      ::error_types&lt;variant> names the type:</c-></del>
<del><c- c1>//   variant&lt;exception_ptr, error_code></c-></del>
<del><c- c1>//</c-></del>
<del><c- c1>// completion_signatures_of_t&lt;my_sender>::sends_stopped is true</c-></del>
<ins><c- c1>// Declares my_sender to be a sender that can complete by calling</c-></ins>
<ins><c- c1>// one of the following for a receiver expression R:</c-></ins>
<ins><c- c1>//    execution::set_value(R)</c-></ins>
<ins><c- c1>//    execution::set_value(R, int{...}, float{...})</c-></ins>
<ins><c- c1>//    execution::set_error(R, exception_ptr{...})</c-></ins>
<ins><c- c1>//    execution::set_error(R, error_code{...})</c-></ins>
<ins><c- c1>//    execution::set_stopped(R)</c-></ins>
</pre>
     <p>-- <i>end example</i>]</p>
    <li data-md>
     <p>This section makes use of the following exposition-only concept:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Fn</c-><c- o>></c->
  <c- k>concept</c-> <i><c- nc>completion</c-><c- o>-</c-><c- n>signature</c-></i> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c->
</pre>
     <ol>
      <li data-md>
       <p>A type <code class="highlight"><c- n>Fn</c-></code> satisfies <code class="highlight"><i><c- n>completion</c-><c- o>-</c-><c- n>signature</c-></i></code> if it is a function type with one of the following forms:</p>
       <ul>
        <li data-md>
         <p><code class="highlight"><c- n>set_value_t</c-><c- p>(</c-><i><c- n>Vs</c-></i><c- p>...)</c-></code>, where <code class="highlight"><i><c- n>Vs</c-></i></code> is an arbitrary parameter pack.</p>
        <li data-md>
         <p><code class="highlight"><c- n>set_error_t</c-><c- p>(</c-><i><c- n>E</c-></i><c- p>)</c-></code>, where <code class="highlight"><i><c- n>E</c-></i></code> is an arbitrary type.</p>
        <li data-md>
         <p><code class="highlight"><c- n>set_stopped_t</c-><c- p>()</c-></code></p>
       </ul>
      <li data-md>
       <p>Otherwise, <code class="highlight"><c- n>Fn</c-></code> does not satisfy <code class="highlight"><i><c- n>completion</c-><c- o>-</c-><c- n>signature</c-></i></code>.</p>
     </ol>
    <li data-md>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><i><c- n>completion</c-><c- o>-</c-><c- n>signature</c-></i><c- p>...</c-> <c- n>Fns</c-><c- o>></c-> <del> <c- c1>// arguments are not associated entities ([lib.tmpl-heads])</c-></del>
  <c- k>struct</c-> <c- nc>completion_signatures</c-> <c- p>{</c-><ins><c- p>};</c-></ins>
    <del><c- k>template</c-> <c- o>&lt;</c-><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Tuple</c-><c- p>,</c-> <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-><c- o>></c-></del>
      <del><c- k>using</c-> <c- n>value_types</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c-></del>
<del></del>
    <del><c- k>template</c-> <c- o>&lt;</c-><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-><c- o>></c-></del>
      <del><c- k>using</c-> <c- n>error_types</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c-></del>
<del></del>
    <del><c- k>static</c-> <c- k>constexpr</c-> <c- b>bool</c-> <c- n>sends_stopped</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c-></del>
  <del><c- p>};</c-></del>
</pre>
     <div class="del">
      <ol>
       <li data-md>
        <p>Let <code class="highlight"><i><c- n>ValueFns</c-></i></code> be a template parameter pack of the function types in <code class="highlight"><c- n>Fns</c-></code> whose return types are <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-></code>, and let <code class="highlight"><i><c- n>Values</c-><i><sub><c- n>n</c-></sub></i></i></code> be a template parameter pack of the function argument types in the <code class="highlight"><i><c- n>n</c-></i></code>-th type in <code class="highlight"><i><c- n>ValueFns</c-></i></code>. Then, given two variadic templates <code class="highlight"><i><c- n>Tuple</c-></i></code> and <code class="highlight"><i><c- n>Variant</c-></i></code>, the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Fns</c-><c- p>...</c-><c- o>>::</c-><c- n>value_types</c-><c- o>&lt;</c-><i><c- n>Tuple</c-></i><c- p>,</c-> <i><c- n>Variant</c-></i><c- o>></c-></code> names the type <code class="highlight"><i><c- n>Variant</c-></i><c- o>&lt;</c-><i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>0</c-></sub></i></i><c- p>...</c-><c- o>></c-><c- p>,</c-> <i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>1</c-></sub></i></i><c- p>...</c-><c- o>></c-><c- p>,</c-> <c- p>...</c-> <i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>m</c-><c- mf>-1</c-></sub></i></i><c- mf>.</c-><c- p>..</c-><c- o>>></c-></code>, where <code class="highlight"><i><c- n>m</c-></i></code> is the size of the parameter pack <code class="highlight"><i><c- n>ValueFns</c-></i></code>.</p>
       <li data-md>
        <p>Let <code class="highlight"><i><c- n>ErrorFns</c-></i></code> be a template parameter pack of the function types in <code class="highlight"><c- n>Fns</c-></code> whose return types are <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-></code>, and let <code class="highlight"><i><c- n>Error</c-><i><sub><c- n>n</c-></sub></i></i></code> be the function argument type in the <code class="highlight"><i><c- n>n</c-></i></code>-th type in <code class="highlight"><i><c- n>ErrorFns</c-></i></code>. Then, given a variadic template <code class="highlight"><i><c- n>Variant</c-></i></code>, the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Fns</c-><c- p>...</c-><c- o>>::</c-><c- n>error_types</c-><c- o>&lt;</c-><i><c- n>Variant</c-></i><c- o>></c-></code> names the type <code class="highlight"><i><c- n>Variant</c-></i><c- o>&lt;</c-><i><c- n>Error</c-><i><sub><c- n>0</c-></sub></i></i><c- p>,</c-> <i><c- n>Error</c-><i><sub><c- n>1</c-></sub></i></i><c- p>,</c-> <c- p>...</c-> <i><c- n>Error</c-><i><sub><c- n>m</c-><c- mi>-1</c-></sub></i></i><c- o>></c-></code>, where <code class="highlight"><i><c- n>m</c-></i></code> is the size of the parameter pack <code class="highlight"><i><c- n>ErrorFns</c-></i></code>.</p>
       <li data-md>
        <p><code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Fns</c-><c- p>...</c-><c- o>>::</c-><c- n>sends_stopped</c-></code> is <code class="highlight">true</code> if at least one of the types in <code class="highlight"><c- n>Fns</c-></code> is <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-></code>; otherwise, <code class="highlight">false</code>.</p>
      </ol>
     </div>
   </ol>
   <div class="ins">
    <ol start="5">
     <li data-md>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c->
        <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c->
        <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Tuple</c-> <c- o>=</c-> <i><c- n>decayed</c-><c- o>-</c-><c- n>tuple</c-></i><c- p>,</c->
        <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-> <c- o>=</c-> <i><c- n>variant</c-><c- o>-</c-><c- n>or</c-><c- o>-</c-><c- n>empty</c-></i><c- o>></c->
    <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
  <c- k>using</c-> <c- n>value_types_of_t</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c->
</pre>
      <ul>
       <li data-md>
        <p>Let <code class="highlight"><c- n>Fns</c-><c- p>...</c-></code> be a template parameter pack of the arguments of the <code class="highlight"><c- n>completion_signatures</c-></code> instantiation named by <code class="highlight"><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code>, let <code class="highlight"><i><c- n>ValueFns</c-></i></code> be a
template parameter pack of the function types in <code class="highlight"><c- n>Fns</c-></code> whose return types
are <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-></code>, and let <code class="highlight"><i><c- n>Values</c-><i><sub><c- n>n</c-></sub></i></i></code> be a template parameter
pack of the function argument types in the <code class="highlight"><i><c- n>n</c-></i></code>-th type
in <code class="highlight"><i><c- n>ValueFns</c-></i></code>. Then, given two variadic templates <code class="highlight"><i><c- n>Tuple</c-></i></code> and <code class="highlight"><i><c- n>Variant</c-></i></code>, the type <code class="highlight"><c- n>value_types_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>Tuple</c-></i><c- p>,</c-> <i><c- n>Variant</c-></i><c- o>></c-></code> names the type <code class="highlight"><i><c- n>Variant</c-></i><c- o>&lt;</c-><i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>0</c-></sub></i></i><c- p>...</c-><c- o>></c-><c- p>,</c-> <i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>1</c-></sub></i></i><c- p>...</c-><c- o>></c-><c- p>,</c-> <c- p>...</c-> <i><c- n>Tuple</c-></i><c- o>&lt;</c-><i><c- n>Values</c-><i><sub><c- n>m</c-><c- mf>-1</c-></sub></i></i><c- mf>.</c-><c- p>..</c-><c- o>>></c-></code>, where <code class="highlight"><i><c- n>m</c-></i></code> is the size of the parameter pack <code class="highlight"><i><c- n>ValueFns</c-></i></code>.</p>
      </ul>
     <li data-md>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c->
        <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- p>,</c->
        <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>Variant</c-> <c- o>=</c-> <i><c- n>variant</c-><c- o>-</c-><c- n>or</c-><c- o>-</c-><c- n>empty</c-></i><c- o>></c->
    <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
  <c- k>using</c-> <c- n>error_types_of_t</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c->
</pre>
      <ul>
       <li data-md>
        <p>Let <code class="highlight"><c- n>Fns</c-><c- p>...</c-></code> be a template parameter pack of the arguments of the <code class="highlight"><c- n>completion_signatures</c-></code> instantiation named by <code class="highlight"><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code>, let <code class="highlight"><i><c- n>ErrorFns</c-></i></code> be a
template parameter pack of the function types in <code class="highlight"><c- n>Fns</c-></code> whose return types
are <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-></code>, and let <code class="highlight"><i><c- n>Error</c-><i><sub><c- n>n</c-></sub></i></i></code> be the function argument
type in the <code class="highlight"><i><c- n>n</c-></i></code>-th type in <code class="highlight"><i><c- n>ErrorFns</c-></i></code>. Then, given a variadic template <code class="highlight"><i><c- n>Variant</c-></i></code>, the type <code class="highlight"><c- n>error_types_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- p>,</c-> <i><c- n>Variant</c-></i><c- o>></c-></code> names the type <code class="highlight"><i><c- n>Variant</c-></i><c- o>&lt;</c-><i><c- n>Error</c-><i><sub><c- n>0</c-></sub></i></i><c- p>,</c-> <i><c- n>Error</c-><i><sub><c- n>1</c-></sub></i></i><c- p>,</c-> <c- p>...</c-> <i><c- n>Error</c-><i><sub><c- n>m</c-><c- mi>-1</c-></sub></i></i><c- o>></c-></code>, where <code class="highlight"><i><c- n>m</c-></i></code> is
the size of the parameter pack <code class="highlight"><i><c- n>ErrorFns</c-></i></code>.</p>
      </ul>
     <li data-md>
<pre class="highlight"><c- k>template</c-><c- o>&lt;</c-><c- k>class</c-> <c- nc>S</c-><c- p>,</c-> <c- k>class</c-> <c- nc>E</c-> <c- o>=</c-> <c- n>no_env</c-><c- o>></c->
    <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c->
  <c- kr>inline</c-> <c- k>constexpr</c-> <c- b>bool</c-> <c- n>sends_stopped</c-> <c- o>=</c-> <i><c- n>see</c-> <c- n>below</c-></i><c- p>;</c->
</pre>
      <ul>
       <li data-md>
        <p>Let <code class="highlight"><c- n>Fns</c-><c- p>...</c-></code> be a template parameter pack of the arguments of the <code class="highlight"><c- n>completion_signatures</c-></code> instantiation named by <code class="highlight"><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code>. <code class="highlight"><c- n>sends_stopped</c-><c- o>&lt;</c-><c- n>S</c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code> is <code class="highlight">true</code> if at
least one of the types in <code class="highlight"><c- n>Fns</c-></code> is <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-></code>;
otherwise, <code class="highlight">false</code>.</p>
      </ul>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.25" id="executionmake_completion_signatures"><span class="secno">6.25. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>make_completion_signatures</c-></code></span><a class="self-link" href="#executionmake_completion_signatures"></a></h3>
   <p>Change [exec.utils.mkcmplsigs] as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><c- n>make_completion_signatures</c-></code> is an alias template used to adapt the
completion signatures of a sender. It takes a sender, and environment, and
several other template arguments that apply modifications to the sender’s
completion signatures to generate a new instantiation of <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-></code>.</p>
    <li data-md>
     <p>[<i>Example:</i></p>
<pre class="highlight"><c- c1>// Given a sender S and an environment Env, adapt a S’s completion</c->
<c- c1>// signatures by lvalue-ref qualifying the values, adding an additional</c->
<c- c1>// exception_ptr error completion if its not already there, and leaving the</c->
<c- c1>// other signals alone.</c->
<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>Args</c-><c- o>></c->
  <c- k>using</c-> <c- n>my_set_value_t</c-> <c- o>=</c->
    <ins><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-></ins>
      <c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>add_lvalue_reference_t</c-><c- o>&lt;</c-><c- n>Args</c-><c- o>></c-><c- p>...)</c-><ins><c- o>></c-></ins><c- p>;</c->

<c- k>using</c-> <c- n>my_completion_signals</c-> <c- o>=</c->
  <c- n>execution</c-><c- o>::</c-><c- n>make_completion_signatures</c-><c- o>&lt;</c->
    <c- n>S</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c->
    <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>exception_ptr</c-><c- p>)</c-><c- o>></c-><c- p>,</c->
    <c- n>my_set_value_t</c-><c- o>></c-><c- p>;</c->
</pre>
     <p>-- <i>end example</i>]</p>
    <li data-md>
     <p>This section makes use of the following exposition-only entities:</p>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-> <c- n>As</c-><c- o>></c->
  <c- k>using</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i> <c- o>=</c->
    <ins><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-></ins><c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-><c- p>(</c-><c- n>As</c-><c- p>...)</c-><ins><c- o>></c-></ins><c- p>;</c->

<c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-> <c- nc>Err</c-><c- o>></c->
  <c- k>using</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></i> <c- o>=</c->
    <ins><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-></ins><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-><c- p>(</c-><c- n>Err</c-><c- p>)</c-><ins><c- o>></c-></ins><c- p>;</c->
</pre>
    <li data-md>
<pre class="highlight"><c- k>template</c-> <c- o>&lt;</c->
  <c- n>execution</c-><c- o>::</c-><c- n>sender</c-> <c- n>Sndr</c-><c- p>,</c->
  <c- k>class</c-> <c- nc>Env</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>no_env</c-><c- p>,</c->
  <del><c- n>class</c-></del><ins><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-></i></ins> <c- n>AddlSigs</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;></c-><c- p>,</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- p>...</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetValue</c-> <c- o>=</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>value</c-></i><c- p>,</c->
  <c- k>template</c-> <c- o>&lt;</c-><c- k>class</c-><c- o>></c-> <c- k>class</c-> <c- nc>SetError</c-> <c- o>=</c-> <i><c- k>default</c-><c- o>-</c-><c- n>set</c-><c- o>-</c-><c- n>error</c-></i><c- p>,</c->
  <del><c- b>bool</c-> <c- n>SendsStopped</c-> <c- o>=</c-> <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures_of_t</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>>::</c-><c- n>sends_stopped</c-><c- o>></c-></del>
  <ins><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-></i> <c- n>SetStopped</c-> <c- o>=</c->
      <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>set_stopped_t</c-><c- p>()</c-><c- o>>></c-></ins>
    <c- k>requires</c-> <c- n>sender</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c->
<c- k>using</c-> <c- n>make_completion_signatures</c-> <c- o>=</c->
  <c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-><c- o>&lt;</c-><i><c- d>/* see below */</c-></i><c- o>></c-><c- p>;</c->
</pre>
     <ul>
      <li data-md>
       <del><code class="highlight"><c- n>AddlSigs</c-></code> shall name an instantiation of the <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-></code> class template.</del>
      <li data-md>
       <p>
        <code class="highlight"><c- n>SetValue</c-></code> shall name an alias template such that for any template
  parameter pack <code class="highlight"><c- n>As</c-><c- p>...</c-></code>, the type <code class="highlight"><c- n>SetValue</c-><c- o>&lt;</c-><c- n>As</c-><c- p>...</c-><c- o>></c-></code> is either ill-formed
        <del>, <code class="highlight"><c- b>void</c-></code> or an
alias for a function type whose return type is <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value_t</c-></code></del>
        <ins>or else <code class="highlight"><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-></i><c- o>&lt;</c-><c- n>SetValue</c-><c- o>&lt;</c-><c- n>As</c-><c- p>...</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code> is satisfied</ins>
        .
       </p>
      <li data-md>
       <p>
        <code class="highlight"><c- n>SetError</c-></code> shall name an alias template such that for any type <code class="highlight"><c- n>Err</c-></code>, <code class="highlight"><c- n>SetError</c-><c- o>&lt;</c-><c- n>Err</c-><c- o>></c-></code> is either ill-formed
        <del>, <code class="highlight"><c- b>void</c-></code> or an alias for a function
type whose return type is <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error_t</c-></code></del>
        <ins>or else <code class="highlight"><i><c- n>valid</c-><c- o>-</c-><c- n>completion</c-><c- o>-</c-><c- n>signatures</c-></i><c- o>&lt;</c-><c- n>SetError</c-><c- o>&lt;</c-><c- n>Err</c-><c- o>></c-><c- p>,</c-> <c- n>E</c-><c- o>></c-></code> is satisfied</ins>
        .
       </p>
     </ul>
     <ins>Then:</ins>
     <ul>
      <li data-md>
       <p>
        Let <code class="highlight"><c- n>Vs</c-><c- p>...</c-></code> be a pack of the 
        <del>non-<code class="highlight"><c- b>void</c-></code></del>
         types in the <code class="highlight"><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i></code> named
by <code class="highlight"><c- n>value_types_of_t</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- o>></c-></code>.
       </p>
      <li data-md>
       <p>
        Let <code class="highlight"><c- n>Es</c-><c- p>...</c-></code> be a pack of the 
        <del>non-<code class="highlight"><c- b>void</c-></code></del>
         types in the <code class="highlight"><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i></code> named by <code class="highlight"><c- n>error_types_of_t</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <i><c- n>error</c-><c- o>-</c-><c- n>list</c-></i><c- o>></c-></code>, where <code class="highlight"><i><c- n>error</c-><c- o>-</c-><c- n>list</c-></i></code> is an
alias template such that <code class="highlight"><i><c- n>error</c-><c- o>-</c-><c- n>list</c-></i><c- o>&lt;</c-><c- n>Ts</c-><c- p>...</c-><c- o>></c-></code> names <code class="highlight"><i><c- n>type</c-><c- o>-</c-><c- n>list</c-></i><c- o>&lt;</c-><c- n>SetError</c-><c- o>&lt;</c-><c- n>Ts</c-><c- o>></c-><c- p>...</c-><c- o>></c-></code>.
       </p>
      <li data-md>
       <p>
        Let <code class="highlight"><c- n>Ss</c-></code> 
        <del>be an empty pack if <code class="highlight"><c- n>SendsStopped</c-></code> is <code class="highlight">false</code>; otherwise, a
pack containing the single type <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped_t</c-><c- p>()</c-></code></del>
        <ins>name the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;></c-></code> if <code class="highlight"><c- n>sends_stopped</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- o>></c-></code> is <code class="highlight">false</code>; otherwise, <code class="highlight"><c- n>SetStopped</c-></code></ins>
        .
       </p>
     </ul>
     <ins>Then:</ins>
     <div class="del">
      <ol start="7">
       <li data-md>
        <p>Let <code class="highlight"><c- n>MoreSigs</c-><c- p>...</c-></code> be a pack of the template arguments of the <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>completion_signatures</c-></code> instantiation named by <code class="highlight"><c- n>AddlSigs</c-></code>.</p>
       <li data-md>
        <p>If any of the above types are ill-formed, then <code class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>AddlSigs</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <c- n>SetDone</c-><c- p>,</c-> <c- n>SendsStopped</c-><c- o>></c-></code> is an alias for <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>Env</c-><c- o>></c-></code>.</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>AddlSigs</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <c- n>SetDone</c-><c- p>,</c-> <c- n>SendsStopped</c-><c- o>></c-></code> names the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Sigs</c-><c- p>...</c-><c- o>></c-></code> where <code class="highlight"><c- n>Sigs</c-><c- p>...</c-></code> is the unique set of types in <code class="highlight"><c- p>[</c-><c- n>Vs</c-><c- p>...,</c-> <c- n>Es</c-><c- p>...,</c-> <c- n>Ss</c-><c- p>...,</c-> <c- n>MoreSigs</c-><c- p>...]</c-></code>.</p>
      </ol>
     </div>
     <div class="ins">
      <ol>
       <li data-md>
        <p>If any of the above types are ill-formed, then <code class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>AddlSigs</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <c- n>SetError</c-><c- p>,</c-> <c- n>SetStopped</c-><c- o>></c-></code> is ill-formed,</p>
       <li data-md>
        <p>Otherwise, if any type in <code class="highlight"><c- p>[</c-><c- n>AddlSigs</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...,</c-> <c- n>Es</c-><c- p>...,</c-> <c- n>Ss</c-><c- p>]</c-></code> is not an
instantiation of <code class="highlight"><c- n>completion_signatures</c-></code>, then <code class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>AddlSigs</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <c- n>SetError</c-><c- p>,</c-> <c- n>SetStopped</c-><c- o>></c-></code> is an alias for <code class="highlight"><c- n>dependent_completion_signatures</c-><c- o>&lt;</c-><c- n>no_env</c-><c- o>></c-></code>,</p>
       <li data-md>
        <p>Otherwise, <code class="highlight"><c- n>make_completion_signatures</c-><c- o>&lt;</c-><c- n>Sndr</c-><c- p>,</c-> <c- n>Env</c-><c- p>,</c-> <c- n>AddlSigs</c-><c- p>,</c-> <c- n>SetValue</c-><c- p>,</c-> <c- n>SetError</c-><c- p>,</c-> <c- n>SetStopped</c-><c- o>></c-></code> names the type <code class="highlight"><c- n>completion_signatures</c-><c- o>&lt;</c-><c- n>Sigs</c-><c- p>...</c-><c- o>></c-></code> where <code class="highlight"><c- n>Sigs</c-><c- p>...</c-></code> is the unique set of types in all the template arguments
of all the <code class="highlight"><c- n>completion_signatures</c-></code> instantiations in <code class="highlight"><c- p>[</c-><c- n>AddlSigs</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...,</c-> <c- n>Es</c-><c- p>...,</c-> <c- n>Ss</c-><c- p>]</c-></code>.</p>
      </ol>
     </div>
   </ol>
   <h3 class="heading settled" data-level="6.26" id="executionas_awaitable"><span class="secno">6.26. </span><span class="content"><code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>as_awaitable</c-></code></span><a class="self-link" href="#executionas_awaitable"></a></h3>
   <p>Change [exec.as_awaitable]/p1.2.1 as follows:</p>
   <ol>
    <li data-md>
     <p><code class="highlight"><i><c- n>awaitable</c-><c- o>-</c-><c- n>receiver</c-></i></code> is equivalent to the following:</p>
<pre class="highlight"><c- k>struct</c-> <i><c- nc>awaitable</c-><c- o>-</c-><c- n>receiver</c-></i> <c- p>{</c->
  <c- n>variant</c-><c- o>&lt;</c-><c- n>monostate</c-><c- p>,</c-> <c- n>result_t</c-><c- p>,</c-> <c- n>exception_ptr</c-><c- o>>*</c-> <c- n>result_ptr_</c-><c- p>;</c->
  <c- n>coroutine_handle</c-><c- o>&lt;</c-><c- n>P</c-><c- o>></c-> <c- n>continuation_</c-><c- p>;</c->
  <c- c1>// ... </c-><i><c- c1>see below</c-></i>
<c- p>};</c->
</pre>
     <p>
      Let <code class="highlight"><c- n>r</c-></code> be an rvalue expression of type <code class="highlight"><i><c- n>awaitable</c-><c- o>-</c-><c- n>receiver</c-></i></code>,
let <code class="highlight"><c- n>cr</c-></code> be a <code class="highlight"><c- k>const</c-></code> lvalue that refers to <code class="highlight"><c- n>r</c-></code>, let 
      <del><code class="highlight"><c- n>v</c-></code></del>
      <ins><code class="highlight"><c- n>vs</c-><c- p>...</c-></code></ins>
       be an 
      <del>expression of type <code class="highlight"><c- n>result_t</c-></code></del>
      <ins>arbitrary function parameter
pack of types <code class="highlight"><c- n>Vs</c-><c- p>...</c-></code></ins>
      , and let <code class="highlight"><c- n>err</c-></code> be an arbitrary expression of type <code class="highlight"><c- n>Err</c-></code>. Then:
     </p>
     <ol>
      <li data-md>
       <del>If <code class="highlight"><c- n>value_t</c-></code> is <code class="highlight"><c- b>void</c-></code>, then <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is expression-equivalent to <code class="highlight"><c- p>(</c-><c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>1</c-><c- o>></c-><c- p>(),</c-> <c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>resume</c-><c- p>())</c-></code>; otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>v</c-><c- p>)</c-></code> is expression-equivalent to <code class="highlight"><c- p>(</c-><c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>1</c-><c- o>></c-><c- p>(</c-><c- n>v</c-><c- p>),</c-> <c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>resume</c-><c- p>())</c-></code>.</del>
       <br> 
       <ins>If <code class="highlight"><c- n>constructible_from</c-><c- o>&lt;</c-><c- n>result_t</c-><c- p>,</c-> <c- n>Vs</c-><c- p>...</c-><c- o>></c-></code> is satisfied, the expression <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>vs</c-><c- p>...)</c-></code> is not potentially throwing and is equivalent to:</ins>
       <div class="ins">
<pre class="highlight">  <c- k>try</c-> <c- p>{</c->
    <c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>1</c-><c- o>></c-><c- p>(</c-><c- n>vs</c-><c- p>...);</c->
  <c- p>}</c-> <c- k>catch</c-><c- p>(...)</c-> <c- p>{</c->
    <c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>2</c-><c- o>></c-><c- p>(</c-><c- n>current_exception</c-><c- p>());</c->
  <c- p>}</c->
  <c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>resume</c-><c- p>();</c->
  </pre>
       </div>
       <ins>Otherwise, <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_value</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>vs</c-><c- p>...)</c-></code> is ill-formed.</ins>
      <li data-md>
       <ins>The expression</ins>
        <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_error</c-><c- p>(</c-><c- n>r</c-><c- p>,</c-> <c- n>err</c-><c- p>)</c-></code> is 
       <ins>not potentially throwing and is</ins>
       <del>expression-</del>
       equivalent to 
       <del><code class="highlight"><c- p>(</c-><c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>2</c-><c- o>></c-><c- p>(</c-><i><c- n>AS_EXCEPT_PTR</c-></i><c- p>(</c-><c- n>err</c-><c- p>)),</c-> <c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>resume</c-><c- p>())</c-></code>,</del>
       <ins>:</ins>
       <div class="ins">
<pre class="highlight">  <c- n>r</c-><c- p>.</c-><c- n>result_ptr_</c-><c- o>-></c-><c- n>emplace</c-><c- o>&lt;</c-><c- mi>2</c-><c- o>></c-><c- p>(</c-><i><c- n>AS_EXCEPT_PTR</c-></i><c- p>(</c-><c- n>err</c-><c- p>));</c->
  <c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>resume</c-><c- p>();</c->
  </pre>
       </div>
       <p>where <code class="highlight"><i><c- n>AS_EXCEPT_PTR</c-></i><c- p>(</c-><c- n>err</c-><c- p>)</c-></code> is:</p>
       <ol>
        <li data-md>
         <p><code class="highlight"><c- n>err</c-></code> if <code class="highlight"><c- n>decay_t</c-><c- o>&lt;</c-><c- n>Err</c-><c- o>></c-></code> names the same type as <code class="highlight"><c- n>exception_ptr</c-></code>,</p>
        <li data-md>
         <p>Otherwise, <code class="highlight"><c- n>make_exception_ptr</c-><c- p>(</c-><c- n>system_error</c-><c- p>(</c-><c- n>err</c-><c- p>))</c-></code> if <code class="highlight"><c- n>decay_t</c-><c- o>&lt;</c-><c- n>Err</c-><c- o>></c-></code> names the same type as <code class="highlight"><c- n>error_code</c-></code>,</p>
        <li data-md>
         <p>Otherwise, <code class="highlight"><c- n>make_exception_ptr</c-><c- p>(</c-><c- n>err</c-><c- p>)</c-></code>.</p>
       </ol>
      <li data-md>
       <ins>The expression</ins>
        <code class="highlight"><c- n>execution</c-><c- o>::</c-><c- n>set_stopped</c-><c- p>(</c-><c- n>r</c-><c- p>)</c-></code> is 
       <ins>not potentially throwing and is</ins>
       <del>expression-</del>
       equivalent to <code class="highlight"><c- k>static_cast</c-><c- o>&lt;</c-><c- n>coroutine_handle</c-><c- o>&lt;>></c-><c- p>(</c-><c- n>r</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>promise</c-><c- p>().</c-><c- n>unhandled_stopped</c-><c- p>()).</c-><c- n>resume</c-><c- p>()</c-></code>. 
      <li data-md>
       <p><code class="highlight"><c- n>tag_invoke</c-><c- p>(</c-><c- n>tag</c-><c- p>,</c-> <c- n>cr</c-><c- p>,</c-> <c- n>as</c-><c- p>...)</c-></code> is expression-equivalent to <code class="highlight"><c- n>tag</c-><c- p>(</c-><c- n>as_const</c-><c- p>(</c-><c- n>cr</c-><c- p>.</c-><c- n>continuation_</c-><c- p>.</c-><c- n>promise</c-><c- p>()),</c-> <c- n>as</c-><c- p>...)</c-></code> for any expression <code class="highlight"><c- n>tag</c-></code> whose type satisfies <code class="highlight"><i><c- n>forwarding</c-><c- o>-</c-><c- n>receiver</c-><c- o>-</c-><c- n>query</c-></i></code> and for any set of arguments <code class="highlight"><c- n>as</c-><c- p>...</c-></code>.</p>
     </ol>
   </ol>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-p2300r4">[P2300R4]
   <dd>Michał Dominiak, Lewis Baker, Lee Howes, Kirk Shoop, Michael Garland, Eric Niebler, Bryce Adelstein Lelbach. <a href="https://wg21.link/p2300r4"><cite>std::execution</cite></a>. 19 January 2022. URL: <a href="https://wg21.link/p2300r4">https://wg21.link/p2300r4</a>
  </dl>